(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagesB/setUp/changePhone"],{"0e30":function(e,t,n){"use strict";var o=n("940c"),s=n.n(o);s.a},"3cea":function(e,t,n){"use strict";n.r(t);var o=n("4a26"),s=n("e1de");for(var i in s)"default"!==i&&function(e){n.d(t,e,(function(){return s[e]}))}(i);n("0e30");var a,c=n("f0c5"),r=Object(c["a"])(s["default"],o["b"],o["c"],!1,null,"1ce3fb4e",null,!1,o["a"],a);t["default"]=r.exports},"4a26":function(e,t,n){"use strict";var o,s=function(){var e=this,t=e.$createElement;e._self._c},i=[];n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}))},"940c":function(e,t,n){},a768:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n("63c9"),s=(n("b206"),function(){Promise.all([n.e("common/vendor"),n.e("components/header")]).then(function(){return resolve(n("6c1c"))}.bind(null,n)).catch(n.oe)}),i=function(){n.e("components/toload").then(function(){return resolve(n("b4d3"))}.bind(null,n)).catch(n.oe)},a={data:function(){return{title:"修改手机号码",display:!0,count:"",timer:null,code:"",newphone:"",passtwo:"",codeone:"",oldphone:"",phone_next:"",access_id:"",fastTap:!0,isSure:!1,load:!1}},mounted:function(){var t=this;setTimeout((function(){console.log("=====>"),console.log(t.$refs),t.$refs.lktAuthorizeComp&&t.$refs.lktAuthorizeComp.handleAfterAuth(t,"../../pages/login/login?landing_code=1",(function(){t.oldphone=e.getStorageSync("user_phone")?e.getStorageSync("user_phone"):t.$store.state.user_phone,t.access_id=e.getStorageSync("access_id")?e.getStorageSync("access_id"):t.$store.state.access_id,t.load=!0}))}),100)},onLoad:function(t){var n=this,o=e.getStorageSync("needRegister"),s=e.getStorageSync("LoingByHand"),i=!s&&o==n.LaiKeTuiCommon.LKT_NRL_TYPE.NRL;i&&(n.title="绑定手机号",e.setNavigationBarTitle({title:n.title}))},methods:{changeLoginStatus:function(){var t=this;t.access_id=e.getStorageSync("access_id")},_changeStep:function(e){11==e.detail.value.length&&6==this.codeone.length?this.isSure=!0:6==e.detail.value.length&&11==this.newphone.length?this.isSure=!0:this.isSure=!1},_telephone:function(){this.oldphone!=this.newphone?this.phone_next=(0,o.telephone)(this.newphone):e.showToast({title:"新号码与旧号码一致！",duration:1e3,icon:"none"})},_verif:function(){if(this.fastTap){this.fastTap=!1;var t=this,n={module:"app",action:"user",app:"secret_key",phone:this.newphone,message_type:0,message_type1:3};this.newphone?e.request({data:n,url:e.getStorageSync("url"),header:{"content-type":"application/x-www-form-urlencoded"},method:"POST",success:function(n){t.fastTap=!0;var o=n.data,s=o.code,i=o.message;if(200!=s)e.showToast({title:i,duration:1e3,icon:"none"});else if(200==s){t._time();var a=300,c=a;console.log(a,c);var r=setInterval((function(){c>0&&c<=a?c--:(clearInterval(r),r=null,t.code="")}),1e3)}console.log(n)},error:function(e){console.log(e),t.fastTap=!0}}):(this.fastTap=!0,e.showToast({title:"未获取到正确的手机号码！",duration:1e3,icon:"none"}))}},_time:function(){var e=this,t=60;this.timer||(this.display=!1,this.count=t,this.timer=setInterval((function(){e.count>0&&e.count<=t?e.count--:(e.display=!0,clearInterval(e.timer),e.timer=null)}),1e3))},_sub:function(){if(this.fastTap){this.fastTap=!1;var t=this;if(console.log(this.codeone,this.code,this.newphone,this.oldphone),""==this.codeone||""==this.newphone?e.showToast({title:"请填写完整信息！",duration:1e3,icon:"none",success:function(e){t.fastTap=!0}}):6!=this.codeone.length?e.showToast({title:"验证码错误！",duration:1e3,icon:"none",success:function(e){t.fastTap=!0}}):this.oldphone!=this.newphone?(this.fastTap=!0,this.phone_next=(0,o.telephone)(this.newphone)):this.oldphone==this.newphone&&e.showToast({title:"您输入的手机号码与原号码相同，请重新输入！",duration:1e3,icon:"none",success:function(e){t.fastTap=!0}}),6==this.codeone.length&&""!=this.newphone&&this.oldphone!=this.newphone&&1==this.phone_next){var n={module:"app",action:"user",app:"update_phone",access_id:this.access_id,y_phone:this.oldphone,x_phone:this.newphone,keyCode:this.codeone};console.log(n),e.request({data:n,url:e.getStorageSync("url"),header:{"content-type":"application/x-www-form-urlencoded"},method:"POST",success:function(n){t.fastTap=!0,console.log(n);var o=n.data,s=o.code,i=o.message;200==s?(e.showToast({title:"修改成功！",duration:1e3,icon:"none"}),e.setStorageSync("user_phone",t.newphone),t.$store.state.user_phone=t.newphone,e.switchTab({url:"../../pages/tabBar/my"})):e.showToast({title:i,duration:1e3,icon:"none"})},error:function(e){console.log(e),t.fastTap=!0}})}else this.fastTap=!0;console.log(this.phone_next)}}},components:{Heads:s,toload:i}};t.default=a}).call(this,n("543d")["default"])},e1de:function(e,t,n){"use strict";n.r(t);var o=n("a768"),s=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=s.a},e609:function(e,t,n){"use strict";(function(e){n("a1f9");o(n("66fd"));var t=o(n("3cea"));function o(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("543d")["createPage"])}},[["e609","common/runtime","common/vendor"]]]);