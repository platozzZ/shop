(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagesB/seckill/seckillDetailsr"],{"0286":function(e,t,i){"use strict";i.r(t);var o=i("c77f"),a=i.n(o);for(var n in o)"default"!==n&&function(e){i.d(t,e,(function(){return o[e]}))}(n);t["default"]=a.a},1675:function(e,t,i){},6702:function(e,t,i){"use strict";var o,a=function(){var e=this,t=e.$createElement;e._self._c},n=[];i.d(t,"b",(function(){return a})),i.d(t,"c",(function(){return n})),i.d(t,"a",(function(){return o}))},"6ab5":function(e,t,i){"use strict";var o=i("1675"),a=i.n(o);a.a},c548:function(e,t,i){"use strict";i.r(t);var o=i("6702"),a=i("0286");for(var n in a)"default"!==n&&function(e){i.d(t,e,(function(){return a[e]}))}(n);i("6ab5");var s,r=i("f0c5"),c=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,"a646cc54",null,!1,o["a"],s);t["default"]=c.exports},c77f:function(e,t,i){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,a=i("2f62"),n=(i("b206"),i("6ea9"));function s(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,o)}return i}function r(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?s(Object(i),!0).forEach((function(t){c(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function c(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var d=function(){Promise.all([i.e("common/vendor"),i.e("components/header")]).then(function(){return resolve(i("6c1c"))}.bind(null,i)).catch(i.oe)},u=function(){i.e("components/maskM").then(function(){return resolve(i("79a9"))}.bind(null,i)).catch(i.oe)},_=function(){Promise.all([i.e("common/vendor"),i.e("components/mpvue-wxparse/src/wxParse")]).then(function(){return resolve(i("7308"))}.bind(null,i)).catch(i.oe)},l=function(){i.e("components/paymodel").then(function(){return resolve(i("dc18"))}.bind(null,i)).catch(i.oe)},h=(o={data:function(){return{order_no:"",bargain_id:"",order_list:"",jiantou:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon/jiantou2x.png",storeImg:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/store.png",showPayWay1:!1,showPayWay:!1,makeOrd:!1,load:!0,ycoupon_name:"",notWallte:!1,useWallte:!1,returnR:"",value:"",value2:"",cpId:"",title:"确认订单信息",adds:"",adds_f:"",price:"",price1:this.products_total+this.freight-this.coupon_name-Number(this.reduce_money),price2:"",remarks:"",products_total:"",reduce_money:"",is_subtraction:1,reduce_name:"",pro:"",user_money:"",needpay:"",guanbiImg:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/close2x.png",pay_y:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/yuezhifu2x.png",pay_z:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/zhifubaozhifu2x.png",pay_w:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/weixinzhifu2x.png",pay_b:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/lALPBb.png",quan_hui:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/xuanzehui2x.png",quan_hei:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/xuanzehei2x.png",zfb:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/zhifubaozhifu2x.png",wx:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/weixinzhifu2x.png",yezf:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/yuezhifu2x.png",pay_bd:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon/baiduzhifu2x.png",ishide:0,pay:[{imgUrl:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/yuezhifu2x.png",name:"钱包余额"},{imgUrl:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/weixinzhifu2x.png",name:"微信支付"},{imgUrl:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/zhifubaozhifu2x.png",name:"支付宝"}],pay_index:-1,pay_style:"",content:"是否抵扣余额？",mask_value:"",orde_id:"",addre_id:"",or_id:"",sNo:"",num:"",access_id:"",digits:["","","","","",""],msg:"",msgLength:0,page:0,otype:"MS",pay_display:!1,password_status:"",password_display:!1,use_coupon:!1,coupon_money:"",coupon_list:"",coupon_id:[],coupon_name:"",coupon_name1:"",coupon_status:!1,freight:"",freightt:"",name:"",channel:"",erroTime:0,enterless:!0,is_distribution:0,discount:1,grade_rate:1,cart_id:"",address_id:"",focus:!0,providerList:"",address:"",loadGif:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/5-121204193R7.gif",aliPayStatue:!1,wxPayStatue:!1,baidupayStatue:!1,fastTap:!0,bind_id:"",total:"",bargain:!1,seckill:!0,h5_content:"",code:"",myappid:"",firstFlag:!0,head:!0,back1:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/back2x.png",can_pay:!0,oldheight:"",buy_again:"",activity_id:"",time_id:"",shop_address_id:"",payTitle:"",platform_activities_id:""}},beforeDestroy:function(){var t=this;this.$store.state.order_id="",e.request({url:e.getStorageSync("url"),data:{module:"app",app:"miaosha_ok",action:"order",access_id:t.access_id,sNo:t.sNo},header:{"content-type":"application/x-www-form-urlencoded"},method:"POST",success:function(e){console.log(e)}})},onLoad:function(t){var i=this;i.access_id=e.getStorageSync("access_id")||this.$store.state.access_id,console.log("默认："+i.$store.state.address_id_def),console.log("缓存："+i.$store.state.address_id),i.$store.state.address_id=i.$store.state.address_id_def,i.cpId=t.product,i.activity_id=i.$store.state.seckilldata.activity_id,i.platform_activities_id=i.$store.state.seckilldata.platform_activities_id,console.log("============================================OPTION:"+i.cpId),console.log(t),i.returnR=t.returnR,console.log(i.returnR),1!=t.buy_again&&"true"!=t.buy_again||(i.buy_again=!0),e.onWindowResize((function(e){""==i.oldheight?(i.oldheight=e.size.windowHeight,i._hide()):Number(i.oldheight)<Number(e.size.windowHeight)?(i.oldheight=e.size.windowHeight,i._show()):Number(i.oldheight)==Number(e.size.windowHeight)?i._show():i._hide()})),console.log(i.cpId),i.cpId&&e.setStorageSync("goodsInfo",i.cpId),t.canshu&&e.setStorageSync("canshu",t.canshu),i.order_no=t.order_no,i.orde_id=i.$store.state.order_id,i.cart_id=i.$store.state.cart_id,t.cart_id&&(i.cart_id=t.cart_id,i.$store.state.cart_id=i.cart_id),i.bind_id=i.$store.state.bindding_num,e.getProvider({service:"payment",success:function(e){i.providerList=e.provider.map((function(e){switch(e){case"alipay":return{name:"支付宝",id:e,loading:!1};case"wxpay":return{name:"微信",id:e,loading:!1}}}))},fail:function(e){console.log("获取支付通道失败：",e)}}),i.$nextTick((function(){i.$refs.lktAuthorizeComp.handleAfterAuth(i,"../login/login?landing_code=1",(function(){i._axios()}))})),i.$nextTick((function(){i.$refs.lktAuthorizeComp.handleAfterAuth(i,"../login/login?landing_code=1",(function(){i.orde_id=i.$store.state.order_id,i.cart_id=i.$store.state.cart_id,i.address_id=i.$store.state.address_id,i.$store.state.address_id=i.$store.state.address_id_def,i.shop_address_id=e.getStorageSync("shop_address_id"),i.bind_id=i.$store.state.bindding_num,i.firstFlag=!0,i.access_id=e.getStorageSync("access_id")?e.getStorageSync("access_id"):i.$store.state.access_id;var t=e.getStorageSync("lkt_address_id_def");t?i.adds_f=!0:""==i.$store.state.address_id_def||void 0==i.$store.state.address_id_def?i.adds_f=!1:i.adds_f=!0,i._axios()}))}))},onUnload:function(){},onShow:function(){var e=this;e._axios("onshow")},methods:r({_yueInput:function(e){var t=this;this.msg=e.detail.value,6==e.detail.value.length&&setTimeout((function(){t.laikepay.laike_walletpay_ok(t)}),100)},changeLoginStatus:function(){var t=this;t.access_id=e.getStorageSync("access_id"),t._axios("==")},_hide:function(){console.log("hide1"),this.ishide=1},_show:function(){console.log("show2"),this.ishide=0,0==this.value.length&&(this.value=0)},_back:function(){switch(this.returnR){case"1":e.switchTab({url:"../tabBar/shoppingCart"});break;case"2":e.navigateBack({delta:1});break;default:e.switchTab({url:"../tabBar/home"})}},toUrl:function(){this.laikepay.toUrl(this)},replaceInput:function(e){this.value=Math.abs(e.detail.value),this._usyue()},_usyue:function(){(0,n.laikeUseyue)(this)},payThree:function(){(0,n.laikePayThree)(this)},_showPayWay:function(){var e=this;this.showPayWay1=!0,setTimeout((function(){e.showPayWay=!1,e.showPayWay1=!1}),500)},forgetPW:function(){e.navigateTo({url:"../../pagesB/setUp/paymentPassword"})},chooseWay:function(e){(0,n.laikeChooseWay)(this,e)},switchChange:function(e){(0,n.laikeSwitchChange)(e,this)},_uni_navigateTo:function(t){e.navigateTo({url:t})},getOrderInfo:function(e){return this.laikepay.getOrderInfo(this,e)},weixinPay:function(){this.laikepay.weixin_minipay(this)},pay_wx:function(e){this.laikepay.laikePayMain(this,e)},_coupon:function(){(0,n.laikeShowCoupon)(this)},_closeCoupon:function(){(0,n.laikeCloseCoupon)(this)},in_array:function(e,t){for(var i=0;i<t.length;i++){var o=t[i].toString();if(o==e)return!0}return!1},_coupon_use:function(e,t,i){(0,n.laikeChooseCoupon)(this,e,t,i)},focust:function(){this.focus=!0}},(0,a.mapMutations)({order_id:"SET_ORDER_ID",status:"SET_STATUS",h_content:"SET_H_CONTENT"}),{_gotPayType:function(){(0,n.laikeGetPayType)(this)},_pay_style:function(){(0,n.laikePayAtOnce)(this)},_confirm:function(e){this.msg=e,this.laikepay.laike_walletpay_ok(this)},_cancel:function(){this.laikepay.laike_walletpay_cancel(this)},_payAxios:function(e){this.laikepay.laike_walletpay(this,e)},_password_status:function(){e.navigateTo({url:"../../pagesB/setUp/payment"}),this.password_display=!1},_mask_value:function(e){this.mask_value=e,"确认"==e&&3==this.pay_style&&this._deduction()},_axios:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";console.log("_axios");var i=this,o=JSON.parse(this.cpId)[3],a=e.getStorageSync("goodsInfo"),n={module:"app",action:"order",app:"Settlement",product_type:"MS",cart_id:this.cart_id,access_id:this.access_id,address_id:this.address_id,canshu:e.getStorageSync("canshu"),sec_id:o.sec_id};a&&(n.product=a,n.cart_id=""),e.request({data:n,url:e.getStorageSync("url"),header:{"content-type":"application/x-www-form-urlencoded"},method:"POST",success:function(o){if(0===o.data.status)return i.load=!1,void e.showToast({title:"交易异常",icon:"none"});var a=o.data,n=(a.addemt,a.address),s=a.coupon_id,r=(a.activity_id,a.time_id),c=a.freight,d=a.name,u=a.password_status,_=a.products,l=a.products_total,h=a.total,p=a.user_money,g=a.enterless,f=a.is_distribution,m=a.discount,y=a.grade_rate,T=o.data.coupon_money||0,O=o.data.reduce_money||0;i.address=n,i.price=h,i.total=h,i.time_id=r,console.log("me.activity_id:"+i.activity_id),console.log("me.time_id:"+i.time_id),i.pro=_,i.payTitle=i.pro.product_title,console.log("me.payTitle"),console.log(i.payTitle),i.user_money=p,n&&(i.addre_id=n.id),i.$store.state.address_id_def||(i.$store.state.address_id_def=n.id),i.password_status=u,"onshow"!=t?(i.coupon_name=T,i.coupon_id=s,i.coupon_name1=o.data.coupon_name):e.getStorageSync("chooseAddress")&&(i.address=e.getStorageSync("chooseAddress"),i.addre_id=e.getStorageSync("chooseAddress").id),i.coupon_status=o.data.coupon_status,i.name=d,i.enterless=g,i.is_distribution=f,i.discount=m||1,i.grade_rate=y||1,i.reduce_money=O,i.reduce_name=o.data.reduce_name,i.is_subtraction=o.data.is_subtraction,i.products_total=l,i.user_money>i.total?(i.pay_index=0,i.pay_style=1):(i.pay_index=1,i.pay_style=2),i.address&&(0!=i.address.length?i.adds_f=!0:i.adds_f=!1),i.freightt=parseFloat(c).toFixed(2),i.freight=c,i.load=!1},error:function(e){console.log(e)}})},changeValue:function(e,t){var i=this;(0,n.laikeChangeValue)(i,e,t)}})},c(o,"onUnload",(function(){e.getStorageSync("chooseAddress")&&e.removeStorageSync("chooseAddress")})),c(o,"components",{heads:d,Maskm:u,wxParse:_,paymodel:l}),c(o,"watch",{address_id:function(e,t){t&&this._axios("address")},msg:function(e){this.msgLength=e.length},page:{handler:function(e,t){0==t&&1==e&&(this.timer=setTimeout((function(){}),500))},deep:!0},freight:function(){var e=this;e.price1=e.products_total*e.discount*e.grade_rate+e.freight-e.coupon_name-e.reduce_money,e.price2=e.price1.toFixed(2),console.log("当前运费为："+e.freight),console.log("当前user_money为："+e.user_money),console.log("当前所有计算金额为："+e.products_total+"==="+e.discount+"==="+e.freight+"==="+e.coupon_name+"==="+e.reduce_money),console.log("当前price2为："+e.price2),e.useWallte&&(Number(e.user_money)>Number(e.price2)?(console.log("me.value11111111111111111"),console.log(e.value),e.value=e.price2,console.log(e.value)):e.needpay=e.price2-e.value),e.price2<0&&(e.price2=.01);var t=this.products_total*this.grade_rate+this.freight-this.coupon_name-this.reduce_money;console.log(t),t<0&&(t=.01),e.needpay=e.price2-e.value},coupon_name:function(e,t){this.changeValue(e,t)},value:function(e,t){this.changeValue(e,t)},price1:function(e,t){var i=this;this.$nextTick((function(){i.price1=i.products_total*i.discount*i.grade_rate+i.freight-i.coupon_name-i.reduce_money-i.value,i.price1=Number(i.price1).toFixed(2),i.needpay=i.price1}))}}),o);t.default=h}).call(this,i("543d")["default"])},d345:function(e,t,i){"use strict";(function(e){i("a1f9");o(i("66fd"));var t=o(i("c548"));function o(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,i("543d")["createPage"])}},[["d345","common/runtime","common/vendor"]]]);