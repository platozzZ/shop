(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagesB/seckill/seckill"],{"22a8":function(t,e,n){"use strict";var i=n("42a5"),o=n.n(i);o.a},"38a3":function(t,e,n){"use strict";var i,o=function(){var t=this,e=t.$createElement;t._self._c},s=[];n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){return i}))},"42a5":function(t,e,n){},6184:function(t,e,n){"use strict";n.r(e);var i=n("38a3"),o=n("99af");for(var s in o)"default"!==s&&function(t){n.d(e,t,(function(){return o[t]}))}(s);n("22a8");var r,a=n("f0c5"),c=Object(a["a"])(o["default"],i["b"],i["c"],!1,null,"b07356b4",null,!1,i["a"],r);e["default"]=c.exports},7107:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n("7f08")),o=n("4c9f"),s=n("2f62");function r(t){return t&&t.__esModule?t:{default:t}}function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){l(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var u=function(){Promise.all([n.e("common/vendor"),n.e("components/header")]).then(function(){return resolve(n("6c1c"))}.bind(null,n)).catch(n.oe)},d=function(){n.e("components/ruleModal").then(function(){return resolve(n("2c17"))}.bind(null,n)).catch(n.oe)},f={data:function(){return{title:"限时秒杀",access_id:"",t_list:[],type:0,kill_bg:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon/kill_bg.png",seckill_rule:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/seckill_rule.png",empty_bg:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/emptybg.png",t_index:0,page:1,list:[],id:"",navType:0,scroll_index:"scroll_0",isShow:!1,content:"",rule:"",time:{hours:"00",minutes:"00",seconds:"00"}}},onLoad:function(e){var n=this;n.access_id=t.getStorageSync("access_id")?t.getStorageSync("access_id"):n.$store.state.access_id,n._axios(n.id),clearInterval(this.Intervalid)},onShow:function(){},computed:{halfWidth:function(){console.log(5);var e=t.getStorageSync("data_height")?t.getStorageSync("data_height"):this.$store.state.data_height,n=parseInt(e),i=2*n;return t.upx2px(i)+"px"}},components:{Heads:u,ruleModal:d},onUnload:function(){clearInterval(this.Intervalid)},watch:{},methods:c({},(0,s.mapMutations)({setseckilldata:"setseckilldata"}),{timeFun:function(t,e){var n=(0,o.getTimeDiff)(t);this.time.hours=n.hours,this.time.minutes=n.minutes,-1===n.seconds.toString().indexOf("-")||1!==e.type&&2!==e.type?(this.time.seconds=n.seconds,this.time=this.time):this._axios()},setCountDown:function(t){var e=this;clearInterval(this.Intervalid);var n=(new Date).getFullYear(),i=(new Date).getMonth()+1,o=(new Date).getDate(),s="";s=2==t.type?"".concat(n,"-").concat(i,"-").concat(o," ").concat(t.starttime):"".concat(n,"-").concat(i,"-").concat(o," ").concat(t.endtime),this.timeFun(s,t),this.Intervalid=setInterval((function(){e.timeFun(s,t)}),1200)},_axios:function(e){var n=this,i=this,o={access_id:this.access_id,module:"app",action:"seckill",m:"seckillhome",page:i.page,id:e};this.$req.post({data:o}).then((function(o){var s=o.code,r=o.list,a=o.rule,c=o.time_list,l=o.msg;if(200!==s)t.showToast({title:o.message||l,duration:1500,icon:"none"});else{if(n.content=a,n.list=r,n.rule=a,r.length)for(var u in r){r[u].progress=i._progress(r[u]);var d=100-parseInt((r[u].max_num-r[u].num)/r[u].max_num*100);r[u].per=d}if(!e){n.t_list=c;for(var f=function(t){if(1==i.t_list[t].type)return setTimeout((function(){i._change(t,i.t_list[t])}),100),{v:void 0}},m=0;m<i.t_list.length;m++){var _=f(m);if("object"===typeof _)return _.v}i._change(0,i.t_list[0])}}}))},_go_details:function(e){if(e.num<=0)return t.showToast({title:"手速慢了哦，已经被抢完了！",icon:"none"}),!1;this.setseckilldata(e),t.navigateTo({url:"../seckill/seckill_detail?pro_id="+e.pro_id+"&navType="+e.type+"&id="+e.id})},_change:function(t,e){var n=this;n.t_index=t,1==e.type?n.navType=0:2==e.type&&(n.navType=1),n.setCountDown(e),n.type=e.type,n.id=e.id,n._axios(n.id),n.scroll_index="scroll_"+t},_remind:function(e){e.setremind=1==e.setremind?0:1;var n={access_id:this.access_id,module:"app",action:"seckill",m:"setremind",activity_id:e.activity_id,pro_id:e.pro_id,time_id:e.time_id,type:e.setremind};t.request({data:n,url:t.getStorageSync("url"),header:{"content-type":"application/x-www-form-urlencoded"},method:"POST",success:function(n){console.log(n),200!=n.data.code&&(e.setremind=1==e.setremind?0:1),t.showToast({title:n.data.message,duration:1500,icon:"none"})},error:function(t){console.log(t)}})},_remain_time:function(t,e){var n=t.lefttime,i="0",o="0";return n>60&&(i=parseInt(n/60),n=parseInt(n%60),i>60&&(o=parseInt(i/60),i=parseInt(i%60))),1==e?o<10?"0"+o:o:2==e?i<10?"0"+i:i:3==e?n<10?"0"+n:n:void 0},_progress:function(t){var e=100-parseInt((t.max_num-t.num)/t.max_num*100);return"width:".concat(e,"%")},_setTime:function(){var t=this;clearTimeout(t.settime),t.settime=setTimeout((function(){for(var e=0;e<t.list.length;e++)t.list[e].lefttime>0&&(t.list[e].lefttime--,t.list[e].count_hour=t._remain_time(t.list[e],1),t.list[e].count_min=t._remain_time(t.list[e],2),t.list[e].count_s=t._remain_time(t.list[e],3),t.list[e].progress=t._progress(t.list[e])),0==t.list[e].lefttime&&t._axios(t.id);t._setTime()}),1e3)},_toGradeUse:function(t){var e=this;t?(this.content=(0,i.default)(e.rule),this.isShow=!this.isShow):this.isShow=!this.isShow}})};e.default=f}).call(this,n("543d")["default"])},9414:function(t,e,n){"use strict";(function(t){n("a1f9");i(n("66fd"));var e=i(n("6184"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},"99af":function(t,e,n){"use strict";n.r(e);var i=n("7107"),o=n.n(i);for(var s in i)"default"!==s&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e["default"]=o.a}},[["9414","common/runtime","common/vendor"]]]);