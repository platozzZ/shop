(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagesB/coupon/coupon_detail"],{1747:function(e,t,a){"use strict";(function(e){a("a1f9");i(a("66fd"));var t=i(a("8cfa"));function i(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,a("543d")["createPage"])},3645:function(e,t,a){"use strict";a.r(t);var i=a("e81d"),s=a.n(i);for(var o in i)"default"!==o&&function(e){a.d(t,e,(function(){return i[e]}))}(o);t["default"]=s.a},"8cfa":function(e,t,a){"use strict";a.r(t);var i=a("bf98"),s=a("3645");for(var o in s)"default"!==o&&function(e){a.d(t,e,(function(){return s[e]}))}(o);a("9018");var n,r=a("f0c5"),c=Object(r["a"])(s["default"],i["b"],i["c"],!1,null,"3a201f9f",null,!1,i["a"],n);t["default"]=c.exports},9018:function(e,t,a){"use strict";var i=a("a933"),s=a.n(i);s.a},a933:function(e,t,a){},bf98:function(e,t,a){"use strict";var i,s=function(){var e=this,t=e.$createElement;e._self._c},o=[];a.d(t,"b",(function(){return s})),a.d(t,"c",(function(){return o})),a.d(t,"a",(function(){return i}))},e81d:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(a("4795")),s=a("2f62");a("b206");function o(e){return e&&e.__esModule?e:{default:e}}function n(e,t,a,i,s,o,n){try{var r=e[o](n),c=r.value}catch(d){return void a(d)}r.done?t(c):Promise.resolve(c).then(i,s)}function r(e){return function(){var t=this,a=arguments;return new Promise((function(i,s){var o=e.apply(t,a);function r(e){n(o,i,s,r,c,"next",e)}function c(e){n(o,i,s,r,c,"throw",e)}r(void 0)}))}}function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(Object(a),!0).forEach((function(t){l(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var u=function(){Promise.all([a.e("common/vendor"),a.e("components/header")]).then(function(){return resolve(a("6c1c"))}.bind(null,a)).catch(a.oe)},h=function(){a.e("components/maskM").then(function(){return resolve(a("79a9"))}.bind(null,a)).catch(a.oe)},p=function(){Promise.all([a.e("common/vendor"),a.e("components/mpvue-wxparse/src/wxParse")]).then(function(){return resolve(a("7308"))}.bind(null,a)).catch(a.oe)},_={data:function(){return{title:"确认订单信息",access_id:"",returnR:2,load:!0,head:!0,address:"",address_id:"",adds_f:"",bind_id:"",coupon_id:"",firstFlag:!0,pro:"",jp_name:"",jp_imgurl:"",jp_total:"",jp_zong:"",price1:this.jp_total-0+this.freight,price2:"",totla:"",freightt:"",freight:"",name:"",channel:"",erroTime:0,enterless:!0,user_money:"",useWallte:!1,value:"",value2:"",cpId:"",needpay:"",ishide:0,pay_display:!1,digits:["","","","","",""],msg:"",msgLength:0,password_display:!1,guanbiImg:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/close2x.png",pay_y:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/yuezhifu2x.png",pay_z:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/zhifubaozhifu2x.png",pay_w:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/weixinzhifu2x.png",pay_b:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/lALPBb.png",quan_hui:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/xuanzehui2x.png",quan_hei:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/xuanzehei2x.png",zfb:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/zhifubaozhifu2x.png",wx:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/weixinzhifu2x.png",yezf:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/yuezhifu2x.png",back1:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/back2x.png",loadGif:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/5-121204193R7.gif",jiantou:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon/jiantou2x.png",storeImg:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/store.png",code:"",pay:[{imgUrl:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/yuezhifu2x.png",name:"钱包余额"},{imgUrl:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/weixinzhifu2x.png",name:"微信支付"},{imgUrl:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/zhifubaozhifu2x.png",name:"支付宝"}],pay_index:-1,pay_style:"",content:"是否抵扣余额？",mask_value:"",showPayWay1:!1,showPayWay:!1,focus:!0,aliPayStatue:!1,wxPayStatue:!1,fastTap:!0,can_pay:!0,oldheight:"",makeOrd:!1,sNo:"",order_list:"",or_id:"",order_id:"",cart_id:"",h5_content:"",grade_rate:1}},onLoad:function(t){var a=this;this.order_list1=e.getStorageSync("order_list"),this.level=e.getStorageSync("level");var i=this;i.$nextTick((function(){i.$refs.lktAuthorizeComp.handleAfterAuth(i,"../../pages/login/login?landing_code=1")})),this.returnR=2,this.cpId=t.product,this.$store.state.address_id=this.$store.state.address_id_def,e.onWindowResize((function(e){""==a.oldheight?(a.oldheight=e.size.windowHeight,a._hide()):Number(a.oldheight)<Number(e.size.windowHeight)?(a.oldheight=e.size.windowHeight,a._show()):Number(a.oldheight)==Number(e.size.windowHeight)?a._show():a._hide()})),this.cpId||(this.cpId=""),t.canshu&&e.setStorageSync("canshu",t.canshu),this.order_no=t.order_no,this.orde_id=this.$store.state.order_id,this.cart_id=this.$store.state.cart_id,t.cart_id&&(this.cart_id=t.cart_id,this.$store.state.cart_id=this.cart_id),this.$store.state.address_id=this.$store.state.address_id_def,this.bind_id=this.$store.state.bindding_num,this.access_id=e.getStorageSync("access_id")?e.getStorageSync("access_id"):this.$store.state.access_id,this._axios(),e.getProvider({service:"payment",success:function(e){console.log("payment success",e),a.providerList=e.provider.map((function(e){switch(e){case"alipay":return{name:"支付宝",id:e,loading:!1};case"wxpay":return{name:"微信",id:e,loading:!1}}}))},fail:function(e){console.log("获取登录通道失败：",e)}}),console.log("option_end")},onShow:function(){var t=this;this.orde_id=this.$store.state.order_id,this.cart_id=this.$store.state.cart_id,this.address_id=this.$store.state.address_id,this.bind_id=this.$store.state.bindding_num,this.firstFlag=!0,this.access_id=e.getStorageSync("access_id")?e.getStorageSync("access_id"):this.$store.state.access_id;var a=e.getStorageSync("lkt_address_id_def");a?this.adds_f=!0:""==this.$store.state.address_id_def||void 0==this.$store.state.address_id_def?this.adds_f=!1:this.adds_f=!0,this._axios(),t.$nextTick((function(){t._axios()}))},methods:d({_yueInput:function(e){var t=this;6==e.detail.value.length&&setTimeout((function(){t._confirm()}),100)},changeLoginStatus:function(){var t=this;t.access_id=e.getStorageSync("access_id"),t._axios()},_hide:function(){console.log("hide1"),this.ishide=1},_show:function(){this.ishide=0,0==this.value.length&&(this.value=0)},_back:function(){console.log("这是return"),console.log(this.returnR),e.switchTab({url:"../../pages/tabBar/home"})},replaceInput:function(e){this.value=Math.abs(e.detail.value),this._usyue()},_usyue:function(){var e=parseFloat(this.jp_total*this.grade_rate+this.freight-this.value).toFixed(2);this.needpay=e>0?e:0},payThree:function(){var t=this;if(this.useWallte)t.wxPayStatue?t.pay_wx():(e.showToast({title:"请选择支付方式！",duration:1e3,icon:"none"}),t.firstFlag=!0);else if(t.wxPayStatue||t.aliPayStatue){var a={module:"app",action:"order",app:"payment",access_id:t.access_id,address_id:t.address_id,grade_l:t.level,product:t.order_list1};this.cpId&&(a.product=this.cpId),t.wxPayStatue?(a.pay_type="mini_wechat",a.store_type=1):t.aliPayStatue&&(a.pay_type="aliPay"),e.request({data:a,url:e.getStorageSync("url"),header:{"content-type":"application/x-www-form-urlencoded"},method:"POST",success:function(a){e.hideLoading();var i=a.data,s=i.status,o=i.data;t.order_list=JSON.stringify(o),0!=s?1==s&&(t.sNo=a.data.data.sNo,t.price1=a.data.data.total,t.order_id=a.data.data.order_id,t.wxPayStatue?t.pay_wx("wx"):t.aliPayStatue&&t.pay_wx("ali")):e.showToast({title:a.data.err,duration:1500,icon:"none"})},error:function(a){e.hideLoading(),t.firstFlag=!0,e.showToast({title:"创建订单失败,请稍后再试!",duration:1500,icon:"none"}),setTimeout((function(){e.navigateBack({delta:1})}),1500)}})}else e.showToast({title:"请选择支付方式！",duration:1e3,icon:"none"}),t.firstFlag=!0},_showPayWay:function(){var e=this;this.showPayWay1=!0,setTimeout((function(){e.showPayWay=!1,e.showPayWay1=!1}),500)},forgetPW:function(){e.navigateTo({url:"../../pagesB/setUp/paymentPassword"})},chooseWay:function(e){"wxPay"==e?this.wxPayStatue?this.wxPayStatue=!1:(this.wxPayStatue=!0,this.aliPayStatue=!1):"aliPay"==e&&(this.aliPayStatue?this.aliPayStatue=!1:(this.wxPayStatue=!1,this.aliPayStatue=!0))},switchChange:function(e){if(!(Number(this.user_money)<=0))if(this.useWallte=e.detail.value,this.useWallte)if(this.price2>=Number(this.user_money))this.value=this.user_money,this.needpay=parseFloat(this.price2-Number(this.user_money)).toFixed(2),console.log("支付总价大于用户余额");else{this.value=this.jp_total*this.grade_rate-0+this.freight;var t=this.jp_total*this.grade_rate-0+this.freight;this.price2=t,this.needpay=0,""===this.value&&(this.value=this.value2),t-this.value>0&&(this.needpay=t-this.value)}else this.value2=this.value,this.value="",this.needpay=""},_uni_navigateTo:function(t){e.navigateTo({url:t})},getOrderInfo:function(t){var a=this,i=this,s={access_id:this.access_id,order_list:i.order_list,title:"",module:"app",action:"pay",type:"app_wechat",type_:"KJ",total:i.price1,bargain_order_no:i.order_no};return s.title=i.jp_name,"wx"==t?s.type="app_wechat":"ali"==t&&(s.type="alipay"),new Promise((function(i){e.request({url:e.getStorageSync("url"),data:s,success:function(s){200==s.statusCode?(i(s),"wx"==t||"ali"==t&&(a.h5_content=s.data)):void 0!=s.data.code&&200!=s.data.code&&e.showToast({title:s.data.message,duration:1500,icon:"none"})},fail:function(e){i(e)}})}))},weixinPay:function(){var t=this,a=this;this.loading=!0,e.login({provider:"weixin",success:function(i){var s;s={code:i.code,order_list:a.order_list,title:a.jp_name,type:"mini_wechat",access_id:t.access_id,total:a.price1,module:"app",action:"pay"},e.request({url:e.getStorageSync("url"),data:s,success:function(i){if(e.hideLoading(),200===i.statusCode)if(200==i.statusCode){var s=i.data;e.requestPayment({provider:"wxpay",timeStamp:s.timeStamp,nonceStr:s.nonceStr,package:s.package,signType:"MD5",paySign:s.paySign,success:function(t){e.showToast({title:"支付成功！",duration:1e3,icon:"none"}),setTimeout((function(){console.log("44444444444444444"),a.$store.state.payRes=a.order_list,e.redirectTo({url:"../../pages/pay/payResult"}),a.pay_display=!1}),1e3)},fail:function(t){e.showModal({title:"提示",content:"支付失败,可在订单列表中查看",success:function(t){t.confirm?e.redirectTo({url:"../../pages/order/myOrder"}):t.cancel&&e.switchTab({url:"../../pages/tabBar/home"})}})},complete:function(){t.loading=!1}})}else e.showModal({title:"提示",content:"支付失败,可在订单列表中查看",success:function(t){a.firstFlag=!0,t.confirm?e.redirectTo({url:"../../pages/order/myOrder"}):t.cancel&&e.switchTab({url:"../../pages/tabBar/home"})}});else e.showModal({title:"提示",content:"支付失败,查看订单详情",success:function(t){t.confirm?e.redirectTo({url:"../../pages/order/myOrder"}):t.cancel&&e.switchTab({url:"../../pages/tabBar/home"})}})},fail:function(i){t.loading=!1,e.hideLoading(),e.showModal({title:"提示",content:"支付失败,查看订单详情",success:function(t){a.firstFlag=!0,t.confirm?e.redirectTo({url:"../../pages/order/myOrder"}):t.cancel&&e.switchTab({url:"../../pages/tabBar/home"})}})}})},fail:function(i){t.loading=!1,e.hideLoading(),e.showModal({title:"提示",content:"支付失败,查看订单详情",success:function(t){a.firstFlag=!0,t.confirm?e.redirectTo({url:"../../pages/order/myOrder"}):t.cancel&&e.switchTab({url:"../../pages/tabBar/home"})}})}})},_payFail:function(){var t=this;e.showModal({title:"提示",content:"支付失败,查看订单详情",success:function(a){t.firstFlag=!0,t.$store.state.payRes=t.order_list,a.confirm?e.redirectTo({url:"../../pages/order/myOrder"}):a.cancel&&e.switchTab({url:"../../pages/tabBar/home"})}})},pay_wx:function(t){var a=this;return r(i.default.mark((function s(){var o,n,r;return i.default.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(t){i.next=2;break}return i.abrupt("return");case 2:return i.next=4,a.getOrderInfo(t);case 4:o=i.sent,n="","wx"==t?n="wxpay":"ali"==t&&(n="alipay"),r=a,200!==o.statusCode&&r._payFail(),JSON.stringify(o.data),e.hideLoading(),e.requestPayment({provider:n,orderInfo:o.data,success:function(t){e.showToast({title:"支付成功！",duration:1e3,icon:"none"}),setTimeout((function(){r.$store.state.payRes=r.order_list,console.log("22222222222222"),e.redirectTo({url:"../../pages/pay/payResult"}),r.pay_display=!0}),1e3)},fail:function(e){JSON.stringify(e);r._payFail()}});case 12:case"end":return i.stop()}}),s)})))()},focust:function(){this.focus=!0}},(0,s.mapMutations)({order_id:"SET_ORDER_ID",status:"SET_STATUS",h_content:"SET_H_CONTENT"}),{_gotPayType:function(){var t=this;this.useWallte||this.wxPayStatue||this.aliPayStatue?(t.firstFlag=!0,console.log("立即支付11==================================")):(e.showToast({title:"请选择支付方式！",duration:1e3,icon:"none"}),t.firstFlag=!1)},_pay_style:function(){var t=this;if(this.adds_f)if(0!=this.price2){if(0==t.value&&t.useWallte&&(t.useWallte=!1),!t.can_pay)return!1;if(console.log("click"),t.can_pay=!1,setTimeout((function(){t.can_pay=!0}),1500),t._gotPayType(),t.firstFlag)if(t.firstFlag=!1,t.value||(t.value=0),this.price1=this.jp_total*this.grade_rate-0+this.freight,this.price1=this.price1.toFixed(2),this.adds_f)if(this.useWallte)if(console.log("立即支付5"),0==this.password_status)e.showModal({title:"提示",content:"请先设置支付密码",showCancel:!0,success:function(a){t.firstFlag=!0,a.confirm&&e.navigateTo({url:"../../pages/setUp/payment"})}});else{var a=Number(this.jp_total)*Number(this.grade_rate)-0+Number(this.freight);if((0!=Number(this.needpay)||a>this.value)&&!this.wxPayStatue&&!this.aliPayStatue)return e.showToast({title:"金额不足以支付商品价格!",icon:"none",duration:1500}),!1;console.log("pay_name");s={module:"app",action:"order",app:"payment",access_id:t.access_id,address_id:t.address_id,grade_l:t.level,product:t.order_list1};if(t.wxPayStatue?(s.pay_type="mini_wechat",s.store_type=1):t.aliPayStatue&&(s.pay_type="aliPay"),e.request({data:s,url:e.getStorageSync("url"),header:{"content-type":"application/x-www-form-urlencoded"},method:"POST",success:function(a){if(404!=a.data.code){var i=a.data,s=i.status,o=i.data;1==s?(t.makeOrd=!0,t.sNo=a.data.data.sNo,t.order_list=JSON.stringify(o)):(t.firstFlag=!0,e.hideLoading(),e.showToast({title:"您已生成待付款订单，请前去支付",duration:1500,icon:"none"}))}else e.hideLoading()}}),this.price1>0){var i=Number(this.jp_total)*Number(this.grade_rate)-0+Number(this.freight);if(0!=Number(this.needpay)||i>this.value){if(!this.wxPayStatue&&!this.aliPayStatue)return console.log("立即支付13==========================="),t.firstFlag=!0,e.showToast({title:"金额不足以支付商品价格!",icon:"none",duration:1500}),!1;t.pay_display=!0,console.log("立即支付12==========================="),console.log("立即支付7========================================="),console.log("立即支付9================================================"),t.pay_display=!0}else console.log("立即支付8================================================="),t.pay_display=!0}else t.pay_display=!0,console.log("立即支付10==================================================")}else{e.showLoading({title:"正在请求支付...",mask:!0});s={module:"app",action:"order",app:"payment",access_id:t.access_id,address_id:t.address_id,grade_l:t.level,product:t.order_list1};this.cpId&&(s.product=this.cpId),s.pay_type="mini_wechat",console.log("立即支付3"),e.request({data:s,url:e.getStorageSync("url"),header:{"content-type":"application/x-www-form-urlencoded"},method:"POST",success:function(a){var i=a.data,s=i.status,o=i.data;t.order_list=JSON.stringify(o),console.log("立即支付2"),1==s?t.weixinPay():(t.firstFlag=!0,e.showToast({title:"创建订单失败,请稍后再试!",duration:1500,icon:"none"}),setTimeout((function(){e.navigateBack({delta:1})}),1500))},error:function(a){t.firstFlag=!0,e.showToast({title:"创建订单失败,请稍后再试!",duration:1500,icon:"none"}),setTimeout((function(){e.navigateBack({delta:1})}),1500)}})}else e.showToast({title:"请完善收货地址！",duration:1e3,icon:"none"});else console.log("立即支付")}else{var s={module:"app",action:"order",app:"payment",access_id:t.access_id,address_id:t.address_id,grade_l:t.level,product:t.order_list1};e.request({data:s,url:e.getStorageSync("url"),header:{"content-type":"application/x-www-form-urlencoded"},method:"POST",success:function(a){200==a.statusCode&&e.redirectTo({url:"../../pages/pay/payResult?payment_money="+t.price2+"&sNo="+a.data.data.sNo})}})}else e.showToast({icon:"none",title:"请完善收货地址"})},toUrl:function(){var t=this,a=window.location.href,i={type:"jsapi_wechat",access_id:this.access_id,app:"get_config",module:"app",action:"commcenter",url:a};e.request({data:i,url:e.getStorageSync("url"),header:{"content-type":"application/x-www-form-urlencoded"},method:"POST",success:function(e){if(200==e.data.code){var a=e.data.data.config.appid;t.myappid=a;var i=e.data.data.url,s="https://open.weixin.qq.com/connect/oauth2/authorize?appid="+a+"&redirect_uri="+i+"&response_type=code&scope=snsapi_base&state=STATE#wechat_redirect";window.location.href=s}},error:function(e){console.log(e)}})},_confirm:function(t){console.log("确认"),console.log(this.fastTap);var a=this;if(this.fastTap)if(console.log("next"),console.log(this.msg.length),console.log(a.enterless),this.fastTap=!1,a.enterless)if(e.showLoading({title:"支付中...",mask:!0}),6==this.msg.length){var i={module:"app",action:"user",app:"payment_password",access_id:this.access_id,password:this.msg,endTime:""};e.request({data:i,url:e.getStorageSync("url"),header:{"content-type":"application/x-www-form-urlencoded"},method:"POST",success:function(t){var i=t.data,s=i.code,o=(i.message,i.enterless);200==s?(a.pay_display=!1,a.fastTap=!0,a._payAxios()):o?(e.hideLoading(),a.msg="",e.showToast({title:"您输入密码错误,请重新输入",duration:1e3,icon:"none"}),a.enterless=o,a.fastTap=!0):o||(e.hideLoading(),e.showToast({title:"你输入的错误次数已达当日上限，请使用其它支付方式进行付款",duration:1e3,icon:"none"}),a.pay_display=!1,a.enterless=!1,a.fastTap=!0)},error:function(t){e.hideLoading(),e.showToast({title:"网络错误，请稍后再试",duration:1e3,icon:"none"}),a.pay_display=!1,a.fastTap=!0}})}else e.hideLoading(),a.fastTap=!0,e.showToast({title:"请输入完整密码！",duration:1e3,icon:"none"});else a.fastTap=!0,e.showToast({title:"你输入的错误次数已达当日上限，请使用其它支付方式进行付款",duration:1e3,icon:"none"}),a.pay_display=!1;else console.log("exit")},_cancel:function(){var t=this;t.pay_display=!1,t.msg="",t.firstFlag=!0,e.showModal({title:"提示",content:"支付失败,查看订单详情",success:function(t){t.confirm?e.redirectTo({url:"../../pages/order/myOrder"}):t.cancel&&e.switchTab({url:"../../pages/tabBar/home"})}})},_payAxios:function(t){var a=this;if(this.fastTap){this.fastTap=!1;var i=this,s={module:"app",action:"pay",app:"wallet_pay",m:"wallet_pay",type:"wallet_pay",access_id:this.access_id,address_id:this.address_id?this.address_id:this.addre_id,order_list:i.order_list};s.payment_money=this.value,e.request({data:s,url:e.getStorageSync("url"),header:{"content-type":"application/x-www-form-urlencoded"},method:"POST",success:function(t){a.fastTap=!0;var s=t.data,o=s.code;s.message;if(200==o)if(Number(i.price1)>0)i.weixinPay();else{e.hideLoading();i.order_id?i.order_id:i.or_id;e.showToast({title:"支付成功！",duration:1e3,icon:"none"});var n=i.price1,r=(n=Number(i.price1)+Number(i.value),i.sNo);setTimeout((function(){console.log("33333333333333"),i.$store.state.payRes=i.order_list,e.redirectTo({url:"../../pages/pay/payResult?payment_money="+n+"&sNo="+r}),i.pay_display=!1}),1e3)}else 112==o?(e.hideLoading(),i.pay_display=!1,i.msg="",i.firstFlag=!0,e.showModal({title:"提示",content:"支付失败,订单已生成，可以在订单列表中查看",showCancel:!1,success:function(t){t.confirm&&e.redirectTo({url:"../../pages/order/myOrder"})}})):(e.hideLoading(),i.pay_display=!1,i.msg="",e.showModal({title:"提示",content:"网络繁忙，支付失败  订单已生成，可以在订单列表中查看",showCancel:!1,success:function(t){i.firstFlag=!0,t.confirm&&e.switchTab({url:"../../pages/tabBar/home"})}}))},error:function(e){i.fastTap=!0}})}},_password_status:function(){e.navigateTo({url:"../../pagesB/setUp/payment"}),this.password_display=!1},_mask_value:function(e){this.mask_value=e,"取消"==e||"确认"==e&&3==this.pay_style&&this._deduction()},_axios:function(){var t=this,a={module:"app",action:"order",auction_id:t.bind_id,grade_l:this.level,access_id:this.access_id,address_id:this.address_id,app:"Settlement",product:this.order_list1};e.request({data:a,url:e.getStorageSync("url"),header:{"content-type":"application/x-www-form-urlencoded"},method:"POST",success:function(e){t.load=!1;var a=e.data,i=(a.addemt,a.address),s=(a.coupon_id,a.freight),o=(a.name,a.password_status),n=(a.products,a.products_total,a.total,a.user_money),r=(a.enterless,a.is_distribution,a.discount,a.grade_rate);if(t.address=i,t.freightt=parseFloat(s).toFixed(2),t.freight=s,e.data.products[0]&&e.data.products[0].list[0]){t.jp_imgurl=e.data.products[0].list[0].img,t.jp_name=e.data.products[0].list[0].product_title;var c={};c.size=e.data.products[0].list[0].size,c.num=e.data.products[0].list[0].num,t.pro=c}t.jp_total=e.data.products_total,t.price1=t.totla-0+t.freight,t.grade_rate=r,t.user_money=n,t.addre_id=i.id,t.$store.state.address_id_def=i.id,t.password_status=o,t.user_money>t.price1?(t.pay_index=0,t.pay_style=1):(t.pay_index=1,t.pay_style=2),t.address&&(0!=t.address.length?t.adds_f=!0:t.adds_f=!1),console.log("这是初始加载"),console.log(t.price2)},error:function(e){console.log(e)}})},changeValue:function(t,a){var i=this;this.$nextTick((function(){i.price1=i.jp_total*i.grade_rate-0+i.freight,i.price2=i.price1.toFixed(2);var s=i.jp_total*i.grade_rate-0+i.freight;if(Number(this.value)>=s?(s<=this.user_money?s>0&&(i.value=s):i.value=i.user_money,Number(this.value)>s&&s>0&&e.showToast({title:"已超过最大金额",icon:"none",duration:1500})):Number(this.value)<s&&Number(this.value)>this.user_money&&(i.value=i.user_money,e.showToast({title:"已超过最大金额",icon:"none",duration:1500})),i.jp_total,i.grade_rate,i.freight,0==Math.abs(t-a)){var o=String(t).indexOf(".")+1,n=String(t).length-o;n>2&&0!=o&&(i.value=Number(t).toFixed(2))}else Math.abs(t-a)<.009999999999&&(i.value=Number(i.value).toFixed(2))}))}},(0,s.mapMutations)({order_id:"SET_ORDER_ID",address_id:"SET_ADDRESS_ID",bindding_num:"SET_BINDDING_NUM",bind_status:"SET_BIND_STATUS",bind_promise:"SET_BIND_PPOMISE",head_id:"SET_HEAD_ID"})),components:{heads:u,Maskm:h,wxParse:p},watch:{address_id:function(){console.log("地址更换"),this._axios()},msg:function(e){this.msgLength=e.length},page:{handler:function(e,t){0==t&&1==e&&(this.timer=setTimeout((function(){}),500))},deep:!0},freight:function(){var t=this;console.log("freight---------------------------------"),t.price1=t.jp_total*t.grade_rate-0+t.freight,t.price2=t.price1.toFixed(2),t.useWallte&&parseFloat(t.user_money)>parseFloat(t.price2)&&(t.value=t.price2);var a=t.jp_total*t.grade_rate-0+t.freight;a<0&&(e.showToast({title:"异常交易",icon:"none",duration:1500}),e.navigateBack({delta:1})),t.needpay=t.price2-0-t.value},coupon_name:function(e,t){this.changeValue(e,t)},value:function(e,t){console.log("改变了value"),this.changeValue(e,t)},price1:function(e,t){var a=this;this.$nextTick((function(){console.log("me.price0"),console.log(a.price1),console.log("value"),console.log(a.value),a.price1=a.jp_total*a.grade_rate-0+a.freight-a.value,a.price1=Number(a.price1).toFixed(2),console.log("me.price1"),console.log(a.price1),console.log("这是price2"),console.log(a.price2),a.needpay=a.price1}))}}};t.default=_}).call(this,a("543d")["default"])}},[["1747","common/runtime","common/vendor"]]]);