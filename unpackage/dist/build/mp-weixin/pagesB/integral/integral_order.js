(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagesB/integral/integral_order"],{"1f17":function(e,t,i){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i("6ea9"),a=(i("b206"),i("2f62"));function n(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,o)}return i}function s(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?n(Object(i),!0).forEach((function(t){r(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):n(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function r(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var c=function(){Promise.all([i.e("common/vendor"),i.e("components/header")]).then(function(){return resolve(i("6c1c"))}.bind(null,i)).catch(i.oe)},u=function(){i.e("components/maskM").then(function(){return resolve(i("79a9"))}.bind(null,i)).catch(i.oe)},d=function(){Promise.all([i.e("common/vendor"),i.e("components/mpvue-wxparse/src/wxParse")]).then(function(){return resolve(i("7308"))}.bind(null,i)).catch(i.oe)},l=function(){i.e("components/paymodel").then(function(){return resolve(i("dc18"))}.bind(null,i)).catch(i.oe)},_={data:function(){return{afhalen:!1,afhalen_translateX:"0",order_no:"",bargain_id:"",isDistribution:!1,order_list:"",integral_hui:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon/integral_hui.png",integral_hei:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon/integral_hei.png",integral_hong:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon/integral.png",jiantou:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon/jiantou2x.png",storeImg:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon/store.png",guanbiImg:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon/close2x.png",pay_y:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon/yuezhifu2x.png",pay_z:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon/zhifubaozhifu2x.png",pay_w:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon/weixinzhifu2x.png",pay_b:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon/lALPBb.png",quan_hui:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon/xuanzehui2x.png",quan_hei:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon/xuanzehei2x.png",zfb:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon/zhifubaozhifu2x.png",wx:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon/weixinzhifu2x.png",yezf:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon/yuezhifu2x.png",back1:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon/back2x.png",loadGif:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon/5-121204193R7.gif",showPayWay1:!1,showPayWay:!1,makeOrd:!1,load:!0,ycoupon_name:"",notWallte:!1,useWallte:!1,value:"",value2:"",cpId:"",title:"确认订单信息",adds:"",adds_f:"",price:"",price1:this.products_total+this.freight-this.coupon_name-Number(this.reduce_money),price2:"",remarks:"",_isopen:!0,products_total:"",reduce_money:"",is_subtraction:1,reduce_name:"",pro:"",user_money:"",user_score:"",needpay:"",ishide:0,canpay:!1,mask_value:"",orde_id:"",addre_id:"",or_id:"",sNo:"",num:"",access_id:"",digits:["","","","","",""],msg:"",msgLength:0,page:0,pay_display:!1,password_status:"",password_display:!1,use_coupon:!1,freight:"",freightt:"",name:"",channel:"",erroTime:0,enterless:!0,cart_id:"",address_id:"",focus:!0,providerList:"",address:"",aliPayStatue:!1,wxPayStatue:!1,fastTap:!0,total:"",h5_content:"",code:"",myappid:"",firstFlag:!0,head:!0,can_pay:!0,oldheight:"",buy_again:"",shop_status:"",shop_address_id:"",shop_list:[],jifen_id:"",payTop:""}},onLoad:function(t){this.afhalen_translateX=e.upx2px(2);var i=this;e.getSystemInfo({success:function(t){i.payTop=t.windowHeight-e.upx2px(100)}}),i.jifen_id=t.id,i.$store.state.address_id=i.$store.state.address_id_def,i.access_id=e.getStorageSync("access_id")?e.getStorageSync("access_id"):this.$store.state.access_id,i.$nextTick((function(){i.$refs.lktAuthorizeComp.handleAfterAuth(i,"../login/login?landing_code=1",(function(){i._axios()}))}))},onShow:function(){var e=this;e.$nextTick((function(){e.$refs.lktAuthorizeComp.handleAfterAuth(e,"../login/login?landing_code=1",(function(){e._axios("onshow>>")}))})),e.address_id=e.$store.state.address_id},methods:s({iptFoucs:function(){this.payPosition="initial"},iptBlur:function(){this.payPosition="fixed"},changeLoginStatus:function(){var t=this;t.access_id=e.getStorageSync("access_id"),t._axios("==")},_hide:function(){this.ishide=1},_show:function(){this.ishide=0,0==this.value.length&&(this.value=0)},_back:function(){e.navigateBack({delta:1})},toUrl:function(){this.laikepay.toUrl(this)},replaceInput:function(e){this.value=Math.abs(e.detail.value),this._usyue()},_usyue:function(){(0,o.laikeUseyue)(this)},payThree:function(){(0,o.laikePayThree)(this)},_showPayWay:function(){var e=this;this.showPayWay1=!0,setTimeout((function(){e.showPayWay=!1,e.showPayWay1=!1}),500)},forgetPW:function(){e.navigateTo({url:"../../pagesB/setUp/paymentPassword"})},chooseWay:function(e){(0,o.laikeChooseWay)(this,e)},switchChange:function(e){(0,o.laikeSwitchChange)(e,this)},_uni_navigateTo:function(t){e.navigateTo({url:t})},getOrderInfo:function(e){return this.laikepay.getOrderInfo(this,e)},weixinPay:function(){this.laikepay.weixin_minipay(this)},pay_wx:function(e){this.laikepay.laikePayMain(this,e)},_coupon:function(){(0,o.laikeShowCoupon)(this)},_closeCoupon:function(){(0,o.laikeCloseCoupon)(this)},in_array:function(e,t){for(var i=0;i<t.length;i++){var o=t[i].toString();if(o==e)return!0}return!1},_coupon_use:function(e,t,i){(0,o.laikeChooseCoupon)(this,e,t,i)},focust:function(){this.focus=!0}},(0,a.mapMutations)({order_id:"SET_ORDER_ID",status:"SET_STATUS",h_content:"SET_H_CONTENT"}),{_pay_style:function(){var t=this;t.adds_f?parseFloat(t.user_money)<parseFloat(t.pro.money)?e.showToast({title:"余额不足，无法兑换！",icon:"none"}):parseFloat(t.user_score)<parseFloat(t.pro.integral)?e.showToast({title:"积分不足，无法兑换！",icon:"none"}):"1"==t.password_status?t.pay_display=!0:t.password_display=!0:e.showToast({title:"请完善收货地址！",icon:"none"})},_confirm:function(){var t=this;if(t.fastTap)if(t.fastTap=!1,t.enterless)if(e.showLoading({title:"支付中...",mask:!0}),6==t.msg.length){var i={module:"app",action:"user",app:"payment_password",access_id:t.access_id,password:t.msg,endTime:""};e.request({data:i,url:e.getStorageSync("url"),header:{"content-type":"application/x-www-form-urlencoded"},method:"POST",success:function(i){var o=i.data,a=o.code,n=(o.message,o.enterless);200==a?(t.pay_display=!1,t.fastTap=!0,t._payAxios()):n?(e.hideLoading(),t.msg="",e.showToast({title:"您输入密码错误,请重新输入",duration:1e3,icon:"none"}),t.enterless=n,t.fastTap=!0):n||(e.hideLoading(),e.showToast({title:"你输入的错误次数已达当日上限，请使用其它支付方式进行付款",duration:1e3,icon:"none"}),t.pay_display=!1,t.enterless=!1,t.fastTap=!0)},error:function(i){e.hideLoading(),e.showToast({title:"网络错误，请稍后再试",duration:1e3,icon:"none"}),t.pay_display=!1,t.fastTap=!0}})}else e.hideLoading(),t.fastTap=!0,e.showToast({title:"请输入完整密码！",duration:1e3,icon:"none"});else t.fastTap=!0,e.showToast({title:"您的密码输入错误次数已达当日上限！",duration:1e3,icon:"none"}),t.pay_display=!1},confirm:function(e){this.msg=e,this._confirm()},_cancel:function(){this.pay_display=!1},_payAxios:function(){var t=this;if(t.fastTap){t.fastTap=!1;var i={module:"app",action:"integral",app:"payment",access_id:t.access_id,address_id:t.address_id?t.address_id:t.addre_id,jifen_id:t.jifen_id,store_type:2};i.store_type=1,e.request({data:i,url:e.getStorageSync("url"),header:{"content-type":"application/x-www-form-urlencoded"},method:"POST",success:function(i){console.log("--------------------paysuccess"),console.log(i),t.fastTap=!0,e.hideLoading(),200==i.data.code?(e.showToast({title:"支付成功",icon:"none"}),t.order_list=i.data,setTimeout((function(){e.setStorageSync("payRes",t.order_list),e.redirectTo({url:"../../pages/pay/payResult?is_jifen=true"})}),1e3)):110==i.data.code?e.showToast({title:i.data.message,duration:1500,icon:"none"}):e.showToast({title:"兑换失败，请重试！",duration:1500,icon:"none"})},error:function(i){console.log("--------------------payerr"),console.log(i),t.fastTap=!0,e.hideLoading()}})}},_password_status:function(){e.navigateTo({url:"../../pagesB/setUp/payment"}),this.password_display=!1},_mask_value:function(e){this.mask_value=e,"确认"==e&&3==this.pay_style&&this._deduction()},_axios:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t=this,i={module:"app",action:"integral",app:"integral_axios",access_id:this.access_id,id:t.jifen_id,address_id:t.address_id};e.request({data:i,url:e.getStorageSync("url"),header:{"content-type":"application/x-www-form-urlencoded"},method:"POST",success:function(i){if(200!=i.data.code)return t.load=!1,void e.showToast({title:"交易异常",icon:"none"});var o=i.data,a=(o.addemt,o.address),n=o.freight,s=o.password_status,r=o.products,c=o.total,u=o.user_money,d=o.user_score,l=o.enterless;console.log("==============load============"),t.address=a,t.price=c,t.total=c,t.pro=r,t.pro.money=parseFloat(t.pro.money),t.user_money=u,t.user_score=d,t.addre_id=a.id,t.$store.state.address_id_def||(t.$store.state.address_id_def=a.id),t.password_status=s,t.enterless=l,t.user_money>t.total&&(t.canpay=!0),t.address&&(0!=t.address.length?t.adds_f=!0:t.adds_f=!1),i.data.shop_status&&i.data.shop_list&&(t.shop_status=i.data.shop_status,t.shop_list=i.data.shop_list,0==i.data.shop_list.length?(t.shop_address_id="",e.setStorageSync("shop_address_id","")):(t.shop_address_id=i.data.shop_list.id,e.setStorageSync("shop_address_id",i.data.shop_list.id))),t.freightt=parseFloat(n),t.freight=n,t.load=!1,console.log("==============load over============")},error:function(e){console.log(e)}})},changeValue:function(e,t){var i=this;(0,o.laikeChangeValue)(i,e,t)}}),components:{heads:c,Maskm:u,wxParse:d,paymodel:l},watch:{address_id:function(e,t){t&&this._axios("address")},msg:function(e){this.msgLength=e.length},page:{handler:function(e,t){0==t&&1==e&&(this.timer=setTimeout((function(){}),500))},deep:!0},freight:function(){var t=this;t.price1=t.products_total*t.discount*t.grade_rate+t.freight-t.coupon_name-t.reduce_money,t.price2=t.price1.toFixed(2),console.log("当前运费为："+t.freight),console.log("当前user_money为："+t.user_money),console.log("当前所有计算金额为："+t.products_total+"==="+t.discount+"==="+t.freight+"==="+t.coupon_name+"==="+t.reduce_money),console.log("当前price2为："+t.price2),t.useWallte&&(Number(t.user_money)>Number(t.price2)?(console.log("me.value11111111111111111"),console.log(t.value),t.value=t.price2,console.log(t.value)):t.needpay=t.price2-t.value),t.price2<0&&(t.price2=.01);var i=this.products_total*this.grade_rate+this.freight-this.coupon_name-this.reduce_money;console.log(i),i<0&&(e.showToast({title:"异常交易",icon:"none",duration:1500}),e.navigateBack({delta:1})),t.needpay=t.price2-t.value},coupon_name:function(e,t){this.changeValue(e,t)},value:function(e,t){this.changeValue(e,t)},price1:function(e,t){var i=this;this.$nextTick((function(){i.price1=i.products_total*i.discount*i.grade_rate+i.freight-i.coupon_name-i.reduce_money-i.value,i.price1=Number(i.price1).toFixed(2),i.needpay=i.price1}))}}};t.default=_}).call(this,i("543d")["default"])},"22f7":function(e,t,i){"use strict";i.r(t);var o=i("aed6"),a=i("ac83");for(var n in a)"default"!==n&&function(e){i.d(t,e,(function(){return a[e]}))}(n);i("75ff");var s,r=i("f0c5"),c=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,"1d9a6022",null,!1,o["a"],s);t["default"]=c.exports},"75ff":function(e,t,i){"use strict";var o=i("fff3"),a=i.n(o);a.a},8854:function(e,t,i){"use strict";(function(e){i("a1f9");o(i("66fd"));var t=o(i("22f7"));function o(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,i("543d")["createPage"])},ac83:function(e,t,i){"use strict";i.r(t);var o=i("1f17"),a=i.n(o);for(var n in o)"default"!==n&&function(e){i.d(t,e,(function(){return o[e]}))}(n);t["default"]=a.a},aed6:function(e,t,i){"use strict";var o,a=function(){var e=this,t=e.$createElement;e._self._c},n=[];i.d(t,"b",(function(){return a})),i.d(t,"c",(function(){return n})),i.d(t,"a",(function(){return o}))},fff3:function(e,t,i){}},[["8854","common/runtime","common/vendor"]]]);