(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagesA/vip/vip","components/lktauthorize"],{"0db0":function(e,t,a){"use strict";var i,n=function(){var e=this,t=e.$createElement;e._self._c},o=[];a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return o})),a.d(t,"a",(function(){return i}))},"11c5":function(e,t,a){"use strict";a.r(t);var i=a("ed4d"),n=a.n(i);for(var o in i)"default"!==o&&function(e){a.d(t,e,(function(){return i[e]}))}(o);t["default"]=n.a},"11fd":function(e,t,a){"use strict";(function(e){a("a1f9");i(a("66fd"));var t=i(a("a60a"));function i(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,a("543d")["createPage"])},"426e":function(e,t,a){},"45b4":function(e,t,a){"use strict";var i=a("f9ef"),n=a.n(i);n.a},"820e":function(e,t,a){"use strict";var i,n=function(){var e=this,t=e.$createElement,a=(e._self._c,e.isshow(1));e.$mp.data=Object.assign({},{$root:{m0:a}})},o=[];a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return o})),a.d(t,"a",(function(){return i}))},a60a:function(e,t,a){"use strict";a.r(t);var i=a("820e"),n=a("c423");for(var o in n)"default"!==o&&function(e){a.d(t,e,(function(){return n[e]}))}(o);a("45b4");var s,r=a("f0c5"),c=Object(r["a"])(n["default"],i["b"],i["c"],!1,null,"71cf5ab2",null,!1,i["a"],s);t["default"]=c.exports},b5c8:function(e,t,a){"use strict";var i=a("426e"),n=a.n(i);n.a},c423:function(e,t,a){"use strict";a.r(t);var i=a("e290"),n=a.n(i);for(var o in i)"default"!==o&&function(e){a.d(t,e,(function(){return i[e]}))}(o);t["default"]=n.a},cc2e:function(e,t,a){"use strict";a.r(t);var i=a("0db0"),n=a("11c5");for(var o in n)"default"!==o&&function(e){a.d(t,e,(function(){return n[e]}))}(o);a("b5c8");var s,r=a("f0c5"),c=Object(r["a"])(n["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],s);t["default"]=c.exports},e290:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;a("b206"),a("2f62"),i(a("cc2e"));function i(e){return e&&e.__esModule?e:{default:e}}function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var o=function(){Promise.all([a.e("common/vendor"),a.e("components/header")]).then(function(){return resolve(a("6c1c"))}.bind(null,a)).catch(a.oe)},s=function(){a.e("components/ruleModal").then(function(){return resolve(a("2c17"))}.bind(null,a)).catch(a.oe)},r=function(){Promise.all([a.e("common/vendor"),a.e("components/mpvue-wxparse/src/wxParse")]).then(function(){return resolve(a("7308"))}.bind(null,a)).catch(a.oe)},c=function(){a.e("components/paymodel").then(function(){return resolve(a("dc18"))}.bind(null,a)).catch(a.oe)},l={data:function(){var t;return t={fromVip:1,payment:"",access_id:"",flag:1,swiperList:[],dotStyle:!1,modalName:null,autoplay:!0,radio:"month",pay:"yue",swiper_dots:!0,title:"雪地会员",payable:0,code:"",level_id:0,pay_display:!1,password_status:"",password_display:!1,rule:"",focus:!1,isfocus:!0,digits:["","","","","",""],msg:"",msgLength:0,isPassWord:0,isWallet:0,wxpay_icon:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/vip/wechat.png",alipay_icon:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/vip/alipay.png",bdpay_icon:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon/baiduzhifu2x.png",yue_icon:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/vip/yue.png",close2ximg:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/close2x.png"},n(t,"code",""),n(t,"isfx",0),n(t,"is_open",""),n(t,"grade",""),n(t,"_confirmFlag",!1),n(t,"isShow",!1),n(t,"vipRights",[[{name:"全场9.0折",image:e.getStorageSync("endurl")+"images/image_1/156404126821.png"},{name:"快速退货",image:e.getStorageSync("endurl")+"images/image_1/156404126821.png"},{name:"专属活动",image:e.getStorageSync("endurl")+"images/image_1/156404126821.png"},{name:"快速退货",image:e.getStorageSync("endurl")+"images/image_1/156404126821.png"},{name:"专属活动",image:e.getStorageSync("endurl")+"images/image_1/156404126821.png"}],[{name:"全场8.0折",image:e.getStorageSync("endurl")+"images/image_1/156404126821.png"},{name:"快速退货",image:e.getStorageSync("endurl")+"images/image_1/156404126821.png"},{name:"专属活动",image:e.getStorageSync("endurl")+"images/image_1/156404126821.png"},{name:"快速退货",image:e.getStorageSync("endurl")+"images/image_1/156404126821.png"},{name:"专属活动",image:e.getStorageSync("endurl")+"images/image_1/156404126821.png"}],[{name:"全场7.0折",image:e.getStorageSync("endurl")+"images/image_1/156404126821.png"},{name:"快速退货",image:e.getStorageSync("endurl")+"images/image_1/156404126821.png"},{name:"专属活动",image:e.getStorageSync("endurl")+"images/image_1/156404126821.png"},{name:"快速退货",image:e.getStorageSync("endurl")+"images/image_1/156404126821.png"},{name:"专属活动",image:e.getStorageSync("endurl")+"images/image_1/156404126821.png"}]]),t},components:{Heads:o,wxParse:r,ruleModal:s,paymodel:c},computed:{swiHeight:function(){var e="";return e}},onLoad:function(t){if(t.data){var a=JSON.parse(t.data);e.setStorageSync("isfx",a.isfx),e.setStorageSync("tui_id",a.tui_id)}},onShow:function(){var t=this;e.getStorageSync("edit_flag")&&(this.flag=e.getStorageSync("edit_flag"),this.grade=e.getStorageSync("edit_grade")),e.getStorageSync("isfx")&&(this.isfx=e.getStorageSync("isfx")),this.access_id=e.getStorageSync("access_id")?e.getStorageSync("access_id"):this.$store.state.access_id,t.LaiKeTuiCommon.getUrlFirst().then((function(e){t._axios()})),this.pay_display=!1},onUnload:function(){e.removeStorageSync("isfx"),e.removeStorage("tui_id"),console.log(1521521)},watch:{msg:function(e){this.msgLength=e.length,console.log(this.msg)}},methods:{onblur:function(){var e=this;setTimeout((function(){e._cancel()}),500)},isshow:function(e){var t=this;return 1==e?1==t.payment.mini_wechat||(t.pay="wechat",!1):(console.log("====>"),console.log(t.payment),!1)},showModal:function(t){var a=this,i=a.LaiKeTuiCommon.ttIOSCantVisualpay();i&&(1!=this.is_open||1!=this.isfx?a.$refs.lktAuthorizeComp.handleAfterAuth(a,"../../pages/login/login?landing_code=1",(function(){"1"!=a.isWallet&&(a.pay="wechat"),a.modalName=t.currentTarget.dataset.target,a.autoplay=!1,a.swiper_dots=!1})):e.showToast({icon:"none",title:"您已经是会员了"}))},_back1:function(){e.showToast({title:"未登录，请先登录",icon:"none",duration:1500}),setTimeout((function(){e.navigateTo({url:"../../pages/login/login?landing_code=1"})}),1e3)},hideModal:function(e){this.modalName=null,this.autoplay=this.swiper_dots=!0},RadioChange:function(e){this.radio=e.detail.value,this.payable=e.currentTarget.dataset.target,console.log(e)},selectPayAble:function(e){this.payable=e.currentTarget.dataset.target,console.log("需支付"+this.payable)},swipeChange:function(e){var t=e.detail.current,a=this.radio,i=this;switch(a){case"month":i.payable=i.swiperList[t].money,i.level_id=i.swiperList[t].id;break;case"season":i.payable=i.swiperList[t].money_j,i.level_id=i.swiperList[t].id;break;case"year":i.payable=i.swiperList[t].money_n,i.level_id=i.swiperList[t].id;break;default:i.payable="";break}},PayRadioChange:function(e){this.pay=e.detail.value,console.log(this.pay)},_payFail:function(){var t=this;return e.showToast({title:"支付失败！",duration:1e3,icon:"none"}),t.pay_display=!1,t.modalName=null,!1},toUrl:function(){var t=this,a=window.location.href,i={type:"jsapi_wechat",access_id:this.access_id,app:"get_config",module:"app",action:"commcenter",url:a};e.request({data:i,url:e.getStorageSync("url"),header:{"content-type":"application/x-www-form-urlencoded"},method:"POST",success:function(e){if(200==e.data.code){var a=e.data.data.config.appid;t.myappid=a;var i=e.data.data.url,n="https://open.weixin.qq.com/connect/oauth2/authorize?appid="+a+"&redirect_uri="+i+"&response_type=code&scope=snsapi_base&state=STATE#wechat_redirect";window.location.href=n}},error:function(e){console.log(e)}})},_axios:function(){var t=this,a={access_id:t.access_id,module:"app",action:"recharge",app:"upgrade",store_type:1};this.isfx&&(this.flag=1),3==this.flag?a.app="upgrade":a.app="grade",e.request({data:a,url:e.getStorageSync("url"),header:{"content-type":"application/x-www-form-urlencoded"},method:"POST",success:function(e){if(console.log(">>>>>>res<<<<<"),console.log(e),404==e.data.code)t.access_id1=!1;else if(200==e.data.code){if(t.swiperList=e.data.data,t.swiperList)for(var a in t.swiperList)a<=t.swiperList.length-1&&t.vipRights[a]&&(t.swiperList[a].rate=Number(t.swiperList[a].rate).toFixed(1),t.vipRights[a][0]["name"]="全场"+t.swiperList[a].rate+"折",t.vipRights[a][1]["name"]="快速退货",t.vipRights[a][2]["name"]="活动专属",t.vipRights[a][3]["name"]="快速发货",t.vipRights[a][4]["name"]="其他优惠");if(t.isPassWord=e.data.is_password,t.isWallet=e.data.is_wallet,t.rule=e.data.rule,t.is_open=e.data.is_open,t.payment=e.data.payment,0==t.level_id){if(2!=t.flag)return t.level_id=t.swiperList[0].id,void(t.payable=t.swiperList[0].money);t.level_id=e.data.grade_id;for(var i=0;i<t.swiperList.length;i++)t.level_id==t.swiperList[i].id&&(t.payable=t.swiperList[i].money)}}},error:function(e){console.log("==err===>"),console.log(e)}})},getOrder:function(){console.log("--------getOrder----------------------");var t=this,a=0,i="";"yue"==t.pay?1==t.isPassWord?(t.pay_display=!0,t.modalName=null,i="wallet_pay"):(t.modalName=null,t.password_display=!0):"alipay"==t.pay?i="aliPay":"wechat"==t.pay?i="mini_wechat":t.pay,"month"==t.radio?a=1:"season"==t.radio?a=2:"year"==t.radio&&(a=3);var n={access_id:t.access_id,module:"app",action:"recharge",app:"grade_order",id:t.level_id,type:i,method:a,total:t.payable,flag:t.flag};1==t.flag&&e.getStorageSync("tui_id")&&(n.tui_id=e.getStorageSync("tui_id")),"wallet_pay"!=i&&e.request({data:n,url:e.getStorageSync("url"),header:{"content-type":"application/x-www-form-urlencoded"},method:"POST",success:function(a){if(t.sNo=a.data.sNo,t.title=a.data.title,t.total=a.data.total,t.order_list=JSON.stringify(a.data.order_list),"mini_wechat"==i)t.pay_name=a.data.pay_type,t.laikepay.weixin_minipay(t);else{if("alipay_minipay"==i){var o={access_id:t.access_id,sNo:t.sNo,title:t.title,module:"app",action:"pay",type:"alipay_minipay",total:t.total,store_type:1},s=t.LaiKeTuiCommon.getMPAliAuthCode();return s.then((function(a){return a&&(o.alimp_authcode=a),new Promise((function(a){e.request({url:e.getStorageSync("url"),data:o,success:function(t){200==t.statusCode||e.showToast({title:t.data.message,duration:1500,icon:"none"})},fail:function(e){var a=e.data;t.laikepay.alipay_minipay(t,a.substr(a.indexOf("s")+1,a.length-4))}})}))}))}if("app_wechat"==i)t.pay_name=a.data.pay_type,n={access_id:t.access_id,title:t.title,module:"app",action:"pay",type:"app_wechat",total:t.total,sNo:t.sNo,order_list:t.order_list},e.request({data:n,url:e.getStorageSync("url"),header:{"content-type":"application/x-www-form-urlencoded"},method:"POST",success:function(e){t.sNo=e.data.sNo,t.title=e.data.title,t.laikepay.app_pay(t,"wxpay",e)},error:function(e){console.log(e)}});else if("jsapi_wechat"==i){t.pay_name=a.data.pay_type;var r={access_id:t.access_id,title:t.title,module:"app",action:"pay",type:"jsapi_wechat",total:t.total,sNo:t.sNo,code:t.code};e.request({data:r,url:e.getStorageSync("url"),header:{"content-type":"application/x-www-form-urlencoded"},method:"POST",success:function(e){t.sNo=e.data.sNo,t.title=e.data.title,t.laikepay.weixin_jsapipay(t,"wx",e)},error:function(e){console.log(e)}})}else if("aliPay"==i){t.pay_name=a.data.pay_type;var c={access_id:t.access_id,title:t.title,module:"app",action:"pay",type:"aliPay",total:t.total,sNo:t.sNo,order_list:t.order_list};e.request({data:c,url:e.getStorageSync("url"),header:{"content-type":"application/x-www-form-urlencoded"},method:"POST",success:function(e){t.sNo=e.data.sNo,t.title=e.data.title,t.laikepay.app_pay(t,"alipay",e)},error:function(e){console.log(e)}})}else{if("tt_alipay"==i){var l={access_id:t.access_id,title:t.title,module:"app",action:"pay",type:"tt_alipay",total:t.total,sNo:t.sNo,order_list:t.order_list},u=t.LaiKeTuiCommon.getMPAliAuthCode();return u.then((function(a){return new Promise((function(a,i){e.request({url:e.getStorageSync("url"),data:l,header:{"content-type":"application/x-www-form-urlencoded"},success:function(e){t.laikepay.tt_pay(t,e)},error:function(e){console.log(e)},fail:function(e){console.log(e)}})}))}))}if("baidu_pay"==i){t.pay_name=a.data.pay_type;var d={access_id:t.access_id,title:t.title,module:"app",action:"pay",type:"baidu_pay",total:t.total,sNo:t.sNo,order_list:t.order_list};e.request({data:d,url:e.getStorageSync("url"),header:{"content-type":"application/x-www-form-urlencoded"},method:"POST",success:function(e){console.log("--------baidu_pay-------------------"),t.sNo=e.data.sNo,t.title=e.data.title,t.hideModal(),t.laikepay.baidu_pay(t,e)},error:function(e){console.log(e)}})}}}},error:function(e){console.log(e)}})},_password_status:function(){e.navigateTo({url:"../../pagesB/setUp/payment"}),this.password_display=!1},focust:function(){this.focus=!0},_cancel:function(){var e=this;e.pay_display=!1,e.msg="",e._confirmFlag=!1},_confirm:function(){if(!this._confirmFlag){this._confirmFlag=!0;var t=this,a=0,i="wallet_pay";if("month"==t.radio?a=1:"season"==t.radio?a=2:"year"==t.radio&&(a=3),6==this.msg.length){var n={access_id:t.access_id,module:"app",action:"recharge",app:"grade_order",id:t.level_id,type:i,method:a,total:t.payable,password:t.msg,flag:t.flag};1==t.flag&&e.getStorageSync("tui_id")&&(n.tui_id=e.getStorageSync("tui_id")),e.request({data:n,url:e.getStorageSync("url"),header:{"content-type":"application/x-www-form-urlencoded"},method:"POST",success:function(a){109==a.data.code?(e.showToast({title:a.data.msg,duration:1e3,icon:"none"}),t._confirmFlag=!1):200==a.data.code&&(e.removeStorage("tui_id"),e.showToast({title:"支付成功",duration:2e3,icon:"none"}),setTimeout((function(){e.navigateTo({url:"../../pagesA/vipClub/vipClub"})}),2e3))},error:function(e){t._confirmFlag=!1,console.log(e)}})}else t._confirmFlag=!1,e.showToast({title:"请输入完整密码！",duration:1e3,icon:"none"})}},confirm:function(e){this.msg=e,this._confirm()},_toGradeUse:function(){this.isShow=!this.isShow}}};t.default=l}).call(this,a("543d")["default"])},ed4d:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={data:function(){return{showWin:!1,access_id:""}},props:["login_status"],methods:{closeWin:function(){this.showWin=!1,this.$emit("cancle")},handleAfterAuth:function(t,a,i,n){var o=this,s=t;s.LaiKeTuiCommon.getLKTApiUrl().then((function(){var t=e.getStorageSync("LoingByHand"),r=e.getStorageSync("needRegister");console.log("========needRegister======="+r),console.log("========LKT_NRL_TYPE.NRL======="+s.LaiKeTuiCommon.LKT_NRL_TYPE.NRL),console.log("========LoingByHand======="+t),console.log("========ddd======="+(r==s.LaiKeTuiCommon.LKT_NRL_TYPE.NRL&&!t)),r!=s.LaiKeTuiCommon.LKT_NRL_TYPE.NRL||t?o.LaiKeTuiCommon.laikeCheckTimeout(s).then((function(t){t.visitor?(e.showToast({title:"请登录！",icon:"none",duration:1e3}),setTimeout((function(){a?e.navigateTo({url:a}):e.navigateTo({url:"../login/login"})}),1e3)):i&&"function"==typeof i&&(n?i(n):i())})):o.LaiketuiWeixinAuth.laiketui_mp_weixin_checksession(o,s,i,n)}))},bindGetUserInfo:function(e){var t=this;this.LaiketuiWeixinAuth.laiketui_mp_weixin_auth(e,t)},ttAuth:function(e){var t=this;this.LaiketuiTTAuth.laiketui_mp_tt_userInfo(t)},bdAuth:function(e){var t=this;this.LaiketuiBDAuth.laiketui_mp_baidu_userInfo(t)},onGetAuthorize:function(e){var t=this;t.LaiketuiAliAuth.laiketui_mp_alipay_userInfo(e,t)}}};t.default=a}).call(this,a("543d")["default"])},f9ef:function(e,t,a){}},[["11fd","common/runtime","common/vendor"]]]);