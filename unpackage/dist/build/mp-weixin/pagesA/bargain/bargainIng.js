(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagesA/bargain/bargainIng"],{"0011":function(e,t,a){"use strict";a.r(t);var i=a("4608"),n=a.n(i);for(var o in i)"default"!==o&&function(e){a.d(t,e,(function(){return i[e]}))}(o);t["default"]=n.a},"19b5":function(e,t,a){"use strict";(function(e){a("a1f9");i(a("66fd"));var t=i(a("640b"));function i(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,a("543d")["createPage"])},4608:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,n=r(a("4795")),o=r(a("7f08"));function r(e){return e&&e.__esModule?e:{default:e}}function s(e,t,a,i,n,o,r){try{var s=e[o](r),c=s.value}catch(d){return void a(d)}s.done?t(c):Promise.resolve(c).then(i,n)}function c(e){return function(){var t=this,a=arguments;return new Promise((function(i,n){var o=e.apply(t,a);function r(e){s(o,i,n,r,c,"next",e)}function c(e){s(o,i,n,r,c,"throw",e)}r(void 0)}))}}function d(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var l,u=function(){Promise.all([a.e("common/vendor"),a.e("components/header")]).then(function(){return resolve(a("6c1c"))}.bind(null,a)).catch(a.oe)},g=function(){Promise.all([a.e("common/vendor"),a.e("components/mpvue-wxparse/src/wxParse")]).then(function(){return resolve(a("7308"))}.bind(null,a)).catch(a.oe)},h=(i={data:function(){var t;return t={cat:e.getStorageSync("endurl")+"images/icon/catIcon.png",headsimg:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/back2x.png",close:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon/close_bb.png",saves:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon/save.png",wx_img:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/wechat.png",logo:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/lktlogo.png",ewm:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/1553677239.png",barExp:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/barExp.png",loadGif:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/loading.gif",brHeadImg:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/brHeadImg.png",celebrate:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/celebrate.png",upList:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/upList.png",loseEfficacyImg:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/loseEfficacy@2x.png",loseImg:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon/kj_lose.png",user_name:"",headimgurl:"",bargain_id:"",friendOver:!1,a:"",self:"",helpListStatus:!0,friend:!1,ruleDiv:!1,list:"",order_no:"",orderNo:""},d(t,"bargain_id",""),d(t,"providerList",""),d(t,"details",[]),d(t,"shareContent","一起来用雪地吧！"),d(t,"shareHref",""),d(t,"brPrice",""),d(t,"hbStatus",!1),d(t,"shareDiv",!1),d(t,"title","超值砍价"),d(t,"access_id",""),d(t,"fastTap",!0),d(t,"load",!1),d(t,"cogDiv",!1),d(t,"proId",""),d(t,"brStatus",""),d(t,"attr_id",""),d(t,"help_num",0),d(t,"help_list",[]),d(t,"islogin",!0),d(t,"order_id",""),d(t,"shareWay",[{name:"二维码分享",imgUrl:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/ewmIcon.png"}]),d(t,"loseEfficacy",!1),d(t,"pageFlag",!1),d(t,"_setTime1",""),t},onShow:function(){this.access_id=e.getStorageSync("access_id")?e.getStorageSync("access_id"):this.$store.state.access_id,this.pageFlag&&this._axios()},onLoad:function(t){var a=this;return c(n.default.mark((function i(){return n.default.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return l=a,e.getExtConfig({success:function(e){console.info(e),(e.extConfig.url||e.extConfig.kefu_url)&&(l.$store.state.kefu_url=e.extConfig.kefu_url)},error:function(e){console.log(e,2)}}),e.showShareMenu({withShareTicket:!0}),l.$nextTick((function(){l.$refs.lktAuthorizeComp.handleAfterAuth(l,"../../pages/login/login?landing_code=1")})),a.friend=t.friend,a.friend&&e.setClipboardData({data:""}),e.getProvider({service:"share",success:function(e){for(var t=[],i=0;i<e.provider.length;i++)switch(e.provider[i]){case"weixin":t.push({name:"分享到微信好友",id:"weixin",sort:0}),t.push({name:"分享到微信朋友圈",id:"weixin",type:"WXSenceTimeline",sort:1});break;case"sinaweibo":t.push({name:"分享到新浪微博",id:"sinaweibo",sort:2});break;case"qq":t.push({name:"分享到QQ",id:"qq",sort:3});break;default:break}a.providerList=t.sort((function(e,t){return e.sort-t.sort}))},fail:function(t){console.log("获取登录通道失败",t),e.showModal({content:"获取登录通道失败",showCancel:!1})}}),a.proId=t.proId,a.attr_id=t.attr_id,a.brStatus=t.brStatus,a.order_no=t.order_no,a.orderNo=t.order_no,a.bargain_id=t.bargain_id,a.access_id=e.getStorageSync("access_id")?e.getStorageSync("access_id"):a.$store.state.access_id,i.next=16,a._axios();case 16:case"end":return i.stop()}}),i)})))()},onShareAppMessage:function(e){var t=getCurrentPages();return{title:"快来帮我砍价吧！",path:t[t.length-1].route}}},d(i,"onShareAppMessage",(function(e){return e.from,{title:this.list.title,path:"/pagesA/bargain/bargainIng?proId="+this.proId+"&attr_id="+this.attr_id+"&order_no="+this.order_no+"&brStatus="+this.brStatus+"&friend=true&bargain_id="+this.bargain_id,imageUrl:this.list.img,bgImgUrl:this.list.img,success:function(e){console.log("成功",e)}}})),d(i,"methods",{_back1:function(){this.outtime()},timeout:function(){this.outtime()},outtime:function(){e.showToast({title:"未登录，请先登录",icon:"none",duration:1500}),setTimeout((function(){e.navigateTo({url:"../../pages/login/login?landing_code=1"})}),1e3)},go_order:function(){e.navigateTo({url:"../../pages/order/order?order_id="+this.order_id+"&showPay=true"})},changeLoginStatus:function(){var e=this;e.access_id=e.$store.state.access_id,e._axios()},_back:function(){this.flag=!1,this.friend?e.switchTab({url:"../../pages/tabBar/home"}):e.navigateBack({delta:1})},_closeAllMask:function(){this.hbStatus=!1,this.shareDiv=!1},goGoods:function(t,a,i,n,o,r,s){var c=this;console.log("=---------------self---------------"+i),this.$store.state.pro_id=t,1==s?e.navigateTo({url:"../../pages/goods/goodsDetailed?&bargain=true&isbegin=1&brStatus="+i+"&attr_id="+a+"&order_no="+n+"&leftTime="+o+"&bargain_id="+r+"&hasorder="+s+"&sNo_id="+c.order_id}):e.navigateTo({url:"../../pages/goods/goodsDetailed?&bargain=true&isbegin=1&brStatus="+i+"&attr_id="+a+"&order_no="+n+"&leftTime="+o+"&bargain_id="+r+"&sNo_id="+c.order_id}),this.pageFlag=!0},goPay:function(){var t=this,a=[];a.push({pid:this.proId}),a.push({cid:this.attr_id}),a.push({num:1}),a.push({bargain:!0}),a.push({bargain_id:t.bargain_id}),a.push({order_no:t.order_no}),a=JSON.stringify(a),e.navigateTo({url:"../../pages/pay/orderDetailsr?product="+a+"&bargain=true&bargain_id="+t.bargain_id+"&order_no="+t.order_no})},goBr:function(){e.navigateTo({url:"bargain?topTabBar=true"})},_helpBar:function(){var t=this;this.islogin||this.$refs.lktAuthorizeComp.handleAfterAuth(this,"../../pages/login/login?landing_code=1"),e.request({url:e.getStorageSync("url"),data:{access_id:t.access_id,module:"app",action:"bargain",goods_id:t.proId,attr_id:t.attr_id,order_no:t.orderNo,m:"helpbargain"},header:{"content-type":"application/x-www-form-urlencoded"},method:"POST",success:function(a){console.log("----helpbargain----"),console.log(a),200==a.data.code?"500"==a.data.statusCode?(t.friendOver=!0,e.showToast({title:a.data.message,icon:"none"})):(t.friendOver=!0,t.cogDiv=!0,t.brPrice=a.data.randprice,t.list.success_money=(parseFloat(t.list.success_money)+a.data.randprice).toFixed(2),t.list.original_price=(parseFloat(t.list.original_price)-a.data.randprice).toFixed(2),console.log("---------sele-------"),console.log(a.data),t.help_list.push({bargain_money:a.data.randprice,headimgurl:a.data.headimgurl,user_name:a.data.user_name})):404==a.data.code&&t.$refs.lktAuthorizeComp.handleAfterAuth(t,"../../pages/login/login?landing_code=1")}})},_helpList:function(e){this.helpListStatus=e},_ruleDiv:function(t){if(this.ruleDiv=t,!t)return!1;var a={m:"getRule",action:"bargain",module:"app"};e.request({url:e.getStorageSync("url"),data:a,header:{"content-type":"application/x-www-form-urlencoded"},method:"POST",success:function(e){var t="<div style='padding-left:8px;padding-right:8px;'>"+e.data.rule.replace(new RegExp("<view","gm"),"<p").replace(new RegExp("</view>","gm"),"</p>")+"</div>",a=t.replace(/\\/g,"").replace(/<img/g,'<img style="display:none;"');a=a.replace("<div style='padding-left:8px;padding-right:8px;'>",'<div style="padding: 0 15px;">'),console.log(a),l.details=(0,o.default)(a)},fail:function(e){console.log(JSON.stringify(e,null,4))}})},saveImg:function(){e.saveImageToPhotosAlbum({filePath:l.ewm,success:function(){e.showToast({title:"保存图片成功",duration:1500,icon:"none"})}})},_shareDiv:function(t){var a=e.getStorageSync("h5_url");this.shareHref=a+"pagesA/bargain/bargainIng?proId="+this.proId+"&attr_id="+this.attr_id+"&order_no="+this.order_no+"&brStatus="+this.brStatus+"&friend=true&bargain_id="+this.bargain_id,this.shareDiv=t},hideMask:function(){this.cogDiv=!1},_invite:function(t){if(this.access_id){console.log("-------------------------share-----"+l.list.img);getCurrentPages();var a=e.getStorageSync("h5_url")+"pagesA/bargain/bargainIng?proId="+l.proId+"&attr_id="+l.attr_id+"&order_no="+l.order_no+"&brStatus="+l.brStatus+"&friend=true&bargain_id="+l.bargain_id;"二维码分享"==t?(e.request({url:e.getStorageSync("url"),data:{module:"app",action:"getcode",m:"share",order_no:l.order_no,proId:this.proId,access_id:this.access_id,store_type:1},header:{"content-type":"application/x-www-form-urlencoded"},method:"POST",success:function(t){l.ewm=e.getStorageSync("endurl")+t.data.imgUrl}}),l.hbStatus=!0):"朋友圈"==t?e.share({provider:"weixin",scene:"WXSenceTimeline",type:0,href:a,title:l.list.title,summary:l.shareContent,imageUrl:l.list.img,success:function(t){l.fastTap=!0,e.showToast({title:"分享成功!",icon:"none"})},fail:function(t){l.fastTap=!0,e.showToast({title:"分享失败!",icon:"none"}),console.log("fail:"+JSON.stringify(t))}}):"微信"==t?e.share({provider:"weixin",scene:"WXSceneSession",type:0,href:a,title:l.list.title,summary:l.shareContent,imageUrl:l.list.img,success:function(t){l.fastTap=!0,e.showToast({title:"分享成功!",icon:"none"})},fail:function(t){l.fastTap=!0,e.showToast({title:"分享失败!",icon:"none"}),console.log("fail:"+JSON.stringify(t))}}):"复制链接"==t&&e.setClipboardData({data:a,success:function(){l.$store.state.isMe=!0,e.showToast({title:"复制成功",duration:1500,icon:"none"})}})}else e.navigateTo({url:"../../pages/login/login?landing_code=1"})},_AxiosAsync:function(t,a){return new Promise((function(i,n){e.request({url:t,data:a,method:"POST",header:{"content-type":"application/x-www-form-urlencoded"},success:function(e){i(e)},fail:function(e){n(e)}})}))},_axios:function(){var t=this;return c(n.default.mark((function a(){var i,o;return n.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return clearTimeout(t._setTime1),i={access_id:t.access_id,module:"app",action:"bargain",goods_id:t.proId,attr_id:t.attr_id,order_no:t.order_no,bargain_id:t.bargain_id},t.friend?(i.m="getgoodsdetail",i.isHelp=1):0==t.brStatus?i.m="createbargain":i.m="getgoodsdetail",a.next=5,t._AxiosAsync(e.getStorageSync("url"),i);case 5:if(o=a.sent,200!=o.data.code){a.next=25;break}return a.next=9,t.setTimeData(o.data.list);case 9:t.brPrice=o.data.bargain_money,t.help_list=o.data.help_list,t.list=o.data.list,t.list.selfstatus||0==t.list.selfstatus||(console.log("--------------ssss--------"+t.list.selfstatus),t.list.selfstatus=t.list.status),t.loseEfficacy=o.data.loseEfficacy,t.bargain_id=o.data.list.bargain_id,0!=t.brStatus&&0==o.data.islogin&&(t.islogin=!1),t.user_name=o.data.help_list[0].user_name,t.headimgurl=o.data.help_list[0].headimgurl,o.data.list.sNo_id&&(t.order_id=o.data.list.sNo_id),0==t.brStatus&&(t.bargain_id=o.data.list.bargain_id,o.data.order_no&&"undefined"!=o.data.order_no&&(console.log("----------o1-------"+t.order_no),t.order_no=o.data.order_no)),500==o.data.status?(o.data.message&&e.showToast({title:o.data.message,icon:"none"}),t.cogDiv=!1):t.cogDiv=!0,t.self=o.data.self,t.friend&&500==o.data.status&&(t.friendOver=!0,t.cogDiv=!1),a.next=26;break;case 25:404==o.data.code?(t.brPrice=o.data.bargain_money,t.help_list=o.data.help_list,console.log("status======================404"),console.log(o.data),t.list=o.data.list,t.setTimeData(o.data.list),t.loseEfficacy=o.data.loseEfficacy,console.log("404end"),o.data.help_list?(t.self=o.data.help_list[0],t.user_name=o.data.help_list[0].user_name,t.headimgurl=o.data.help_list[0].headimgurl):(t.islogin=!1,t.$refs.lktAuthorizeComp.handleAfterAuth(t,"../../pages/login/login?landing_code=1"))):e.showToast({title:o.data.message,icon:"none"});case 26:console.log(t.brPrice+"-----弹窗！-------"+t.cogDiv),t.help_num=t.help_list.length;case 28:case"end":return a.stop()}}),a)})))()},setTimeData:function(e){var t=this;return c(n.default.mark((function a(){var i,o,r,s,c,d,l;return n.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:i=t,o=e,a.prev=2,o.leftTime,a.next=9;break;case 6:return a.prev=6,a.t0=a["catch"](2),a.abrupt("return",!1);case 9:r=o.leftTime-1,s=Math.floor(r/60/60/24),c=Math.floor(r/3600-24*s),d=Math.floor((r-60*c*60-24*s*60*60)/60),l=r%60,c<10&&(c="0"+c),d<10&&(d="0"+d),l<10&&(l="0"+l),o.hour=c,o.mniuate=d,o.second=l,o.day=s,o.leftTime<=0&&(o.hour="00",o.mniuate="00",o.second="00",o.day=""),i.list=o,clearTimeout(i._setTime1),i._setTime1=setTimeout((function(){try{o.leftTime}catch(c){return!1}var t=--o.leftTime,a=Math.floor(t/60/60/24),n=Math.floor(t/3600-24*a),r=Math.floor((t-60*n*60-24*a*60*60)/60),s=t%60;n<10&&(n="0"+n),r<10&&(r="0"+r),s<10&&(s="0"+s),o.hour=n,o.mniuate=r,o.second=s,o.day=a,o.leftTime<=0&&(o.hour="00",o.mniuate="00",o.second="00",o.day=""),i.list=o,i.setTimeData(e)}),1e3);case 25:case"end":return a.stop()}}),a,null,[[2,6]])})))()}}),d(i,"computed",{halfWidth:function(){var t=e.getStorageSync("data_height")?e.getStorageSync("data_height"):this.$store.state.data_height,a=parseInt(t),i=2*a;return e.upx2px(i)+"px"},width1:function(){return this.a=this.list.success_money/this.list.free_money*100,this.a+"%"}}),d(i,"components",{heads:u,wxParse:g}),i);t.default=h}).call(this,a("543d")["default"])},"48ce":function(e,t,a){"use strict";var i=a("8eca"),n=a.n(i);n.a},"640b":function(e,t,a){"use strict";a.r(t);var i=a("d436"),n=a("0011");for(var o in n)"default"!==o&&function(e){a.d(t,e,(function(){return n[e]}))}(o);a("48ce");var r,s=a("f0c5"),c=Object(s["a"])(n["default"],i["b"],i["c"],!1,null,"5bf0b668",null,!1,i["a"],r);t["default"]=c.exports},"8eca":function(e,t,a){},d436:function(e,t,a){"use strict";var i,n=function(){var e=this,t=e.$createElement;e._self._c},o=[];a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return o})),a.d(t,"a",(function(){return i}))}},[["19b5","common/runtime","common/vendor"]]]);