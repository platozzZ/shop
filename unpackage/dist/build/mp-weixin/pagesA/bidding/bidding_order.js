(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagesA/bidding/bidding_order"],{"077d":function(e,t,a){"use strict";(function(e){a("a1f9");i(a("66fd"));var t=i(a("5156"));function i(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,a("543d")["createPage"])},"096a":function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,o=n(a("4795")),s=a("2f62");a("b206");function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t,a,i,o,s,n){try{var r=e[s](n),c=r.value}catch(d){return void a(d)}r.done?t(c):Promise.resolve(c).then(i,o)}function c(e){return function(){var t=this,a=arguments;return new Promise((function(i,o){var s=e.apply(t,a);function n(e){r(s,i,o,n,c,"next",e)}function c(e){r(s,i,o,n,c,"throw",e)}n(void 0)}))}}function d(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function u(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?d(Object(a),!0).forEach((function(t){l(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var p=function(){Promise.all([a.e("common/vendor"),a.e("components/header")]).then(function(){return resolve(a("6c1c"))}.bind(null,a)).catch(a.oe)},h=function(){a.e("components/maskM").then(function(){return resolve(a("79a9"))}.bind(null,a)).catch(a.oe)},_=function(){Promise.all([a.e("common/vendor"),a.e("components/mpvue-wxparse/src/wxParse")]).then(function(){return resolve(a("7308"))}.bind(null,a)).catch(a.oe)},g={data:function(){return{open_wxpay:!1,open_alipay:!1,payment:"",title:"确认订单信息",access_id:"",returnR:2,load:!0,head:!0,address:"",address_id:"",adds_f:"",bind_id:"",coupon_id:"",firstFlag:!0,pro:"",jp_name:"",jp_imgurl:"",jp_total:"",jp_zong:"",price1:this.jp_total-0+this.freight,price2:"",totla:"",freightt:"",freight:"",name:"",channel:"",erroTime:0,enterless:!0,user_money:"",useWallte:!1,value:"",value2:"",cpId:"",needpay:"",ishide:0,pay_display:!1,digits:["","","","","",""],msg:"",msgLength:0,password_display:!1,guanbiImg:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/close2x.png",pay_y:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/yuezhifu2x.png",pay_z:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/zhifubaozhifu2x.png",pay_bd:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon/baiduzhifu2x.png",pay_w:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/weixinzhifu2x.png",pay_b:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/lALPBb.png",quan_hui:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/xuanzehui2x.png",quan_hei:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/xuanzehei2x.png",zfb:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/zhifubaozhifu2x.png",wx:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/weixinzhifu2x.png",yezf:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/yuezhifu2x.png",back1:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/back2x.png",loadGif:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/5-121204193R7.gif",jiantou:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon/jiantou2x.png",storeImg:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/store.png",code:"",pay:[{imgUrl:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/yuezhifu2x.png",name:"钱包余额"},{imgUrl:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/weixinzhifu2x.png",name:"微信支付"},{imgUrl:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/zhifubaozhifu2x.png",name:"支付宝"}],pay_index:-1,pay_style:"",content:"是否抵扣余额？",mask_value:"",showPayWay1:!1,showPayWay:!1,focus:!0,aliPayStatue:!1,baidupayStatue:!1,wxPayStatue:!1,fastTap:!0,can_pay:!0,oldheight:"",makeOrd:!1,sNo:"",order_list:"",or_id:"",order_id:"",cart_id:"",h5_content:"",grade_rate:1}},onLoad:function(t){var a=this,i=this;i.$nextTick((function(){i.$refs.lktAuthorizeComp.handleAfterAuth(i,"../../pages/login/login?landing_code=1")})),this.returnR=2,this.cpId=t.product,this.$store.state.address_id=this.$store.state.address_id_def,e.onWindowResize((function(e){""==a.oldheight?(a.oldheight=e.size.windowHeight,a._hide()):Number(a.oldheight)<Number(e.size.windowHeight)?(a.oldheight=e.size.windowHeight,console.log("111"),a._show()):Number(a.oldheight)==Number(e.size.windowHeight)?(console.log("222"),a._show()):(console.log("333"),a._hide())})),this.cpId||(this.cpId=""),t.canshu&&e.setStorageSync("canshu",t.canshu),this.order_no=t.order_no,this.orde_id=this.$store.state.order_id,this.cart_id=this.$store.state.cart_id,t.cart_id&&(this.cart_id=t.cart_id,this.$store.state.cart_id=this.cart_id),this.$store.state.address_id=this.$store.state.address_id_def,this.bind_id=this.$store.state.bindding_num,this.access_id=e.getStorageSync("access_id")?e.getStorageSync("access_id"):this.$store.state.access_id,this._axios(),e.getProvider({service:"payment",success:function(e){console.log("payment success",e),a.providerList=e.provider.map((function(e){switch(e){case"alipay":return{name:"支付宝",id:e,loading:!1};case"wxpay":return{name:"微信",id:e,loading:!1}}}))},fail:function(e){console.log("获取登录通道失败：",e)}})},onShow:function(){var t=this;this.orde_id=this.$store.state.order_id,this.cart_id=this.$store.state.cart_id,this.address_id=this.$store.state.address_id,this.bind_id=this.$store.state.bindding_num,this.firstFlag=!0,this.access_id=e.getStorageSync("access_id")?e.getStorageSync("access_id"):this.$store.state.access_id;var a=e.getStorageSync("lkt_address_id_def");a?this.adds_f=!0:""==this.$store.state.address_id_def||void 0==this.$store.state.address_id_def?this.adds_f=!1:this.adds_f=!0,this._axios(),t.$nextTick((function(){t._axios()}))},methods:u({isshow:function(){var e=this;1==e.payment.mini_wechat&&(e.open_wxpay=!0)}},(0,s.mapMutations)((i={order_id:"SET_ORDER_ID",address_id:"SET_ADDRESS_ID",bindding_num:"SET_BINDDING_NUM",bind_status:"SET_BIND_STATUS",bind_promise:"SET_BIND_PPOMISE",head_id:"SET_HEAD_ID"},l(i,"order_id","SET_ORDER_ID"),l(i,"status","SET_STATUS"),l(i,"h_content","SET_H_CONTENT"),i)),{changeLoginStatus:function(){var t=this;t.access_id=e.getStorageSync("access_id"),t._axios()},_hide:function(){console.log("hide1"),this.ishide=1},_show:function(){console.log("show2"),this.ishide=0,0==this.value.length&&(this.value=0)},_back:function(){console.log("这是return"),console.log(this.returnR),e.switchTab({url:"../../pages/tabBar/home"})},replaceInput:function(e){this.value=Math.abs(e.detail.value),this._usyue()},_usyue:function(){var e=parseFloat(this.jp_total*this.grade_rate+this.freight-this.value).toFixed(2);this.needpay=e>0?e:0},payThree:function(){var t=this;if(this.useWallte)t.wxPayStatue?t.pay_wx():(e.showToast({title:"请选择支付方式！",duration:1e3,icon:"none"}),t.firstFlag=!0);else if(t.wxPayStatue||t.aliPayStatue||t.baidupayStatue){var a={module:"app",action:"order",app:"payment",access_id:t.access_id,address_id:t.address_id,type:"JP",auction_id:t.bind_id,coupon_id:t.coupon_id};this.cpId&&(a.product=this.cpId),t.wxPayStatue?(a.pay_type="mini_wechat",a.store_type=1):t.aliPayStatue&&(a.pay_type="aliPay"),e.request({data:a,url:e.getStorageSync("url"),header:{"content-type":"application/x-www-form-urlencoded"},method:"POST",success:function(a){e.hideLoading();var i=a.data,o=i.status,s=i.data;t.order_list=JSON.stringify(s),0!=o?1==o&&(t.sNo=a.data.data.sNo,t.price1=a.data.data.total,t.order_id=a.data.data.order_id,t.wxPayStatue?t.pay_wx("wx"):t.aliPayStatue?t.pay_wx("ali"):t.pay_wx("baidu_pay")):e.showToast({title:a.data.err,duration:1500,icon:"none"})},error:function(a){e.hideLoading(),t.firstFlag=!0,e.showToast({title:"创建订单失败,请稍后再试!",duration:1500,icon:"none"}),setTimeout((function(){e.navigateBack({delta:1})}),1500)}})}else e.showToast({title:"请选择支付方式！",duration:1e3,icon:"none"}),t.firstFlag=!0},_showPayWay:function(){var e=this;this.showPayWay1=!0,setTimeout((function(){e.showPayWay=!1,e.showPayWay1=!1}),500)},forgetPW:function(){e.navigateTo({url:"../../pagesB/setUp/paymentPassword"})},chooseWay:function(e){"wxPay"==e?this.wxPayStatue?this.wxPayStatue=!1:(this.wxPayStatue=!0,this.aliPayStatue=!1,this.baidupayStatue=!1):"aliPay"==e?this.aliPayStatue?this.aliPayStatue=!1:(this.wxPayStatue=!1,this.aliPayStatue=!0,this.baidupayStatue=!1):"baidu_pay"==e&&(this.aliPayStatue?this.baidupayStatue=!1:(this.wxPayStatue=!1,this.aliPayStatue=!1,this.baidupayStatue=!0))},switchChange:function(e){if(!(Number(this.user_money)<=0))if(this.useWallte=e.detail.value,this.useWallte)if(this.price2>=Number(this.user_money))this.value=this.user_money,this.needpay=parseFloat(this.price2-Number(this.user_money)).toFixed(2),console.log("支付总价大于用户余额");else{this.value=(this.jp_total*this.grade_rate-0+this.freight).toFixed(2);var t=this.jp_total*this.grade_rate-0+this.freight;this.price2=t,this.needpay=0,""===this.value&&(this.value=this.value2.toFixed(2)),t-this.value>0&&(this.needpay=t-this.value)}else this.value2=this.value,this.value="",this.needpay=""},_uni_navigateTo:function(t){e.navigateTo({url:t})},getOrderInfo:function(t){var a=this,i=this,o={access_id:this.access_id,order_list:i.order_list,title:"",module:"app",action:"pay",type:"app_wechat",type_:"JP",total:i.price1,bargain_order_no:i.order_no};o.title=i.jp_name,"wx"==t?o.type="app_wechat":"ali"==t&&(o.type="alipay");var s=i.LaiKeTuiCommon.getMPAliAuthCode();return s.then((function(i){return new Promise((function(i){e.request({url:e.getStorageSync("url"),data:o,success:function(o){200==o.statusCode?(i(o),"wx"==t||"ali"==t&&(a.h5_content=o.data)):void 0!=o.data.code&&200!=o.data.code&&e.showToast({title:o.data.message,duration:1500,icon:"none"})},fail:function(e){i(e)}})}))}))},weixinPay:function(){var t=this,a=this;this.loading=!0,e.login({provider:"weixin",success:function(i){var o;o={code:i.code,order_list:a.order_list,title:a.jp_name,type:"mini_wechat",access_id:t.access_id,total:a.price1,module:"app",action:"pay"},e.request({url:e.getStorageSync("url"),data:o,success:function(i){if(e.hideLoading(),200===i.statusCode)if(200==i.statusCode){var o=i.data;e.requestPayment({provider:"wxpay",timeStamp:o.timeStamp,nonceStr:o.nonceStr,package:o.package,signType:"MD5",paySign:o.paySign,success:function(t){e.showToast({title:"支付成功！",duration:1e3,icon:"none"}),setTimeout((function(){console.log("44444444444444444"),a.$store.state.payRes=a.order_list,e.redirectTo({url:"../../pages/pay/payResult"}),a.pay_display=!1}),1e3)},fail:function(t){e.showModal({title:"提示",content:"支付失败,可在订单列表中查看",success:function(t){t.confirm?e.redirectTo({url:"../../pages/order/myOrder"}):t.cancel&&e.switchTab({url:"../../pages/tabBar/home"})}})},complete:function(){t.loading=!1}})}else e.showModal({title:"提示",content:"支付失败,可在订单列表中查看",success:function(t){a.firstFlag=!0,t.confirm?e.redirectTo({url:"../../pages/order/myOrder"}):t.cancel&&e.switchTab({url:"../../pages/tabBar/home"})}});else e.showModal({title:"提示",content:"支付失败,查看订单详情",success:function(t){t.confirm?e.redirectTo({url:"../../pages/order/myOrder"}):t.cancel&&e.switchTab({url:"../../pages/tabBar/home"})}})},fail:function(i){t.loading=!1,e.hideLoading(),e.showModal({title:"提示",content:"支付失败,查看订单详情",success:function(t){a.firstFlag=!0,t.confirm?e.redirectTo({url:"../../pages/order/myOrder"}):t.cancel&&e.switchTab({url:"../../pages/tabBar/home"})}})}})},fail:function(i){t.loading=!1,e.hideLoading(),e.showModal({title:"提示",content:"支付失败,查看订单详情",success:function(t){a.firstFlag=!0,t.confirm?e.redirectTo({url:"../../pages/order/myOrder"}):t.cancel&&e.switchTab({url:"../../pages/tabBar/home"})}})}})},_payFail:function(){var t=this;e.showModal({title:"提示",content:"支付失败,查看订单详情",success:function(a){t.firstFlag=!0,t.$store.state.payRes=t.order_list,a.confirm?e.redirectTo({url:"../../pages/order/myOrder"}):a.cancel&&e.switchTab({url:"../../pages/tabBar/home"})}})},pay_wx:function(t){var a=this;return c(o.default.mark((function i(){var s,n,r;return o.default.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(t){i.next=2;break}return i.abrupt("return");case 2:return i.next=4,a.getOrderInfo(t);case 4:s=i.sent,n="","wx"==t?n="wxpay":"ali"==t&&(n="alipay"),r=a,200!==s.statusCode&&r._payFail(),JSON.stringify(s.data),e.hideLoading(),e.requestPayment({provider:n,orderInfo:s.data,success:function(t){e.showToast({title:"支付成功！",duration:1e3,icon:"none"}),setTimeout((function(){r.$store.state.payRes=r.order_list,console.log("22222222222222"),e.redirectTo({url:"../../pages/pay/payResult"}),r.pay_display=!0}),1e3)},fail:function(e){JSON.stringify(e);r._payFail()}});case 12:case"end":return i.stop()}}),i)})))()},focust:function(){this.focus=!0},_gotPayType:function(){var t=this;this.useWallte||this.wxPayStatue||this.aliPayStatue||this.baidupayStatue?(t.firstFlag=!0,console.log("立即支付11==================================")):(e.showToast({title:"请选择支付方式！",duration:1e3,icon:"none"}),t.firstFlag=!1)},_pay_style:function(){var t=this;if(0==t.value&&t.useWallte&&(t.useWallte=!1),!t.can_pay)return!1;if(console.log("click"),t.can_pay=!1,setTimeout((function(){t.can_pay=!0}),1500),t._gotPayType(),t.firstFlag)if(t.firstFlag=!1,t.value||(t.value=0),this.price1=this.jp_total*this.grade_rate-0+this.freight,this.price1=this.price1.toFixed(2),this.adds_f)if(this.useWallte)if(console.log("立即支付5"),0==this.password_status)e.showModal({title:"提示",content:"请先设置支付密码",showCancel:!0,success:function(a){t.firstFlag=!0,a.confirm&&e.navigateTo({url:"../../pages/setUp/payment"})}});else{var a=Number(this.jp_total)*Number(this.grade_rate)-0+Number(this.freight);if((0!=Number(this.needpay)||a>this.value)&&!(this.wxPayStatue||this.aliPayStatue||this.baidupayStatue))return e.showToast({title:"金额不足以支付商品价格!",icon:"none",duration:1500}),!1;console.log("pay_name");var i={module:"app",action:"order",app:"payment",access_id:t.access_id,address_id:t.address_id,type:"JP",auction_id:t.bind_id,product:t.cpId,coupon_id:t.coupon_id};if(t.wxPayStatue?(i.pay_type="mini_wechat",i.store_type=1):t.aliPayStatue?i.pay_type="aliPay":t.baidupayStatue&&(i.pay_type="baidu_pay"),e.request({data:i,url:e.getStorageSync("url"),header:{"content-type":"application/x-www-form-urlencoded"},method:"POST",success:function(a){if(404!=a.data.code){var i=a.data,o=i.status,s=i.data;1==o?(t.makeOrd=!0,t.sNo=a.data.data.sNo,t.order_list=JSON.stringify(s)):(t.firstFlag=!0,e.hideLoading(),e.showToast({title:"您已生成待付款订单，请前去支付",duration:1500,icon:"none"}),setTimeout((function(){e.navigateBack({url:"../good/goodsDetailed"})}),1500))}else e.hideLoading()}}),this.price1>0){var o=Number(this.jp_total)*Number(this.grade_rate)-0+Number(this.freight);if(0!=Number(this.needpay)||o>this.value){if(!(this.wxPayStatue||this.aliPayStatue||this.baidupayStatue))return console.log("立即支付13==========================="),t.firstFlag=!0,e.showToast({title:"金额不足以支付商品价格!",icon:"none",duration:1500}),!1;t.pay_display=!0,console.log("立即支付12==========================="),console.log("立即支付7========================================="),console.log("立即支付9================================================"),t.pay_display=!0}else console.log("立即支付8================================================="),t.pay_display=!0}else t.pay_display=!0,console.log("立即支付10==================================================")}else{e.showLoading({title:"正在请求支付...",mask:!0});i={module:"app",action:"order",app:"payment",access_id:t.access_id,address_id:t.address_id,type:"JP",auction_id:t.bind_id,coupon_id:t.coupon_id};this.cpId&&(i.product=this.cpId),i.pay_type="mini_wechat",console.log("立即支付3"),e.request({data:i,url:e.getStorageSync("url"),header:{"content-type":"application/x-www-form-urlencoded"},method:"POST",success:function(a){var i=a.data,o=i.status,s=i.data;t.order_list=JSON.stringify(s),console.log("立即支付2"),1==o?t.weixinPay():(t.firstFlag=!0,e.showToast({title:"创建订单失败,请稍后再试!",duration:1500,icon:"none"}),setTimeout((function(){e.navigateBack({delta:1})}),1500))},error:function(a){t.firstFlag=!0,e.showToast({title:"创建订单失败,请稍后再试!",duration:1500,icon:"none"}),setTimeout((function(){e.navigateBack({delta:1})}),1500)}})}else e.showToast({title:"请完善收货地址！",duration:1e3,icon:"none"});else console.log("立即支付")},toUrl:function(){var t=this,a=window.location.href,i={type:"jsapi_wechat",access_id:this.access_id,app:"get_config",module:"app",action:"commcenter",url:a};e.request({data:i,url:e.getStorageSync("url"),header:{"content-type":"application/x-www-form-urlencoded"},method:"POST",success:function(e){if(200==e.data.code){var a=e.data.data.config.appid;t.myappid=a;var i=e.data.data.url,o="https://open.weixin.qq.com/connect/oauth2/authorize?appid="+a+"&redirect_uri="+i+"&response_type=code&scope=snsapi_base&state=STATE#wechat_redirect";window.location.href=o}},error:function(e){console.log(e)}})},_confirm:function(t){var a=this;if(this.fastTap)if(this.fastTap=!1,a.enterless)if(e.showLoading({title:"支付中...",mask:!0}),6==this.msg.length){var i={module:"app",action:"user",app:"payment_password",access_id:this.access_id,password:this.msg,endTime:""};e.request({data:i,url:e.getStorageSync("url"),header:{"content-type":"application/x-www-form-urlencoded"},method:"POST",success:function(t){var i=t.data,o=i.code,s=(i.message,i.enterless);200==o?(a.pay_display=!1,a.fastTap=!0,a._payAxios()):s?(e.hideLoading(),a.msg="",e.showToast({title:"您输入密码错误,请重新输入",duration:1e3,icon:"none"}),a.enterless=s,a.fastTap=!0):s||(e.hideLoading(),e.showToast({title:"你输入的错误次数已达当日上限，请使用其它支付方式进行付款",duration:1e3,icon:"none"}),a.pay_display=!1,a.enterless=!1,a.fastTap=!0)},error:function(t){e.hideLoading(),e.showToast({title:"网络错误，请稍后再试",duration:1e3,icon:"none"}),a.pay_display=!1,a.fastTap=!0}})}else e.hideLoading(),a.fastTap=!0,e.showToast({title:"请输入完整密码！",duration:1e3,icon:"none"});else a.fastTap=!0,e.showToast({title:"你输入的错误次数已达当日上限，请使用其它支付方式进行付款",duration:1e3,icon:"none"}),a.pay_display=!1;else console.log("exit")},_cancel:function(){var t=this;t.pay_display=!1,t.msg="",t.firstFlag=!0,e.showModal({title:"提示",content:"支付失败,查看订单详情",success:function(t){t.confirm?e.redirectTo({url:"../../pages/order/myOrder"}):t.cancel&&e.switchTab({url:"../../pages/tabBar/home"})}})},_payAxios:function(t){var a=this;if(this.fastTap){this.fastTap=!1;var i=this,o={module:"app",action:"pay",app:"wallet_pay",m:"wallet_pay",type:"wallet_pay",access_id:this.access_id,address_id:this.address_id?this.address_id:this.addre_id,order_list:i.order_list};o.payment_money=this.value,e.request({data:o,url:e.getStorageSync("url"),header:{"content-type":"application/x-www-form-urlencoded"},method:"POST",success:function(t){a.fastTap=!0;var o=t.data,s=o.code;o.message;if(200==s)if(Number(i.price1)>0)i.weixinPay();else{e.hideLoading();i.order_id?i.order_id:i.or_id;e.showToast({title:"支付成功！",duration:1e3,icon:"none"});var n=i.price1,r=(n=Number(i.price1)+Number(i.value),i.sNo);setTimeout((function(){console.log("33333333333333"),i.$store.state.payRes=i.order_list,e.redirectTo({url:"../../pages/pay/payResult?payment_money="+n+"&sNo="+r}),i.pay_display=!1}),1e3)}else 112==s?(e.hideLoading(),i.pay_display=!1,i.msg="",i.firstFlag=!0,e.showModal({title:"提示",content:"支付失败,订单已生成，可以在订单列表中查看",showCancel:!1,success:function(t){t.confirm&&e.redirectTo({url:"../../pages/order/myOrder"})}})):(e.hideLoading(),i.pay_display=!1,i.msg="",e.showModal({title:"提示",content:"网络繁忙，支付失败  订单已生成，可以在订单列表中查看",showCancel:!1,success:function(t){i.firstFlag=!0,t.confirm&&e.switchTab({url:"../../pages/tabBar/home"})}}))},error:function(e){i.fastTap=!0},fail:function(e){}})}},_password_status:function(){e.navigateTo({url:"../../pagesB/setUp/payment"}),this.password_display=!1},_mask_value:function(e){this.mask_value=e,"取消"==e||"确认"==e&&3==this.pay_style&&this._deduction()},_axios:function(){var t=this;console.log("加载初始数据=-=-=-=-="),console.log(t.bind_id,this.address_id);var a={module:"app",action:"order",auction_id:t.bind_id,product_type:"JP",access_id:this.access_id,address_id:this.address_id,app:"Settlement"};e.request({data:a,url:e.getStorageSync("url"),header:{"content-type":"application/x-www-form-urlencoded"},method:"POST",success:function(e){t.load=!1;var a=e.data,i=a.payment,o=(a.addemt,a.address),s=(a.coupon_id,a.freight),n=(a.name,a.password_status),r=a.products,c=(a.products_total,a.total,a.user_money),d=(a.enterless,a.is_distribution,a.discount,a.grade_rate);t.address=o,t.freightt=parseFloat(s).toFixed(2),t.freight=s,t.payment=i,t.jp_imgurl=e.data.imgurl,t.jp_name=e.data.a_title,t.jp_total=e.data.products_total,t.price1=t.totla-0+t.freight,t.grade_rate=d,console.log("这是address"),console.log(o),console.log(o.id),t.user_money=c,t.addre_id=o.id,t.$store.state.address_id_def=o.id,t.password_status=n,t.pro=r[0],t.user_money>t.price1?(t.pay_index=0,t.pay_style=1):(t.pay_index=1,t.pay_style=2),t.address&&(0!=t.address.length?t.adds_f=!0:t.adds_f=!1),console.log("这是初始加载"),console.log(t.price2),t.isshow()},error:function(e){console.log(e)}})},changeValue:function(t,a){var i=this;this.$nextTick((function(){i.price1=i.jp_total*i.grade_rate-0+i.freight,i.price2=i.price1.toFixed(2),i.price2<0&&(i.price2=.01);var o=(i.jp_total*i.grade_rate-0+i.freight).toFixed(2);if(Number(this.value)>=o?(Number(o)<=Number(this.user_money)?o>0?i.value=o:(i.value=.01,this.useWallte?i.needpay=0:i.needpay=.01,i.price2=.01):i.value=i.user_money,Number(this.value)>o&&o>0&&e.showToast({title:"已超过最大金额1",icon:"none",duration:1500})):Number(this.value)<o&&Number(this.value)>this.user_money&&(i.value=i.user_money,e.showToast({title:"已超过最大金额2",icon:"none",duration:1500})),i.jp_total,i.grade_rate,i.freight,0==Math.abs(t-a)){var s=String(t).indexOf(".")+1,n=String(t).length-s;n>2&&0!=s&&(i.value=Number(t).toFixed(2))}else Math.abs(t-a)<.009999999999&&(i.value=Number(i.value).toFixed(2))}))}}),components:{heads:p,Maskm:h,wxParse:_},watch:{address_id:function(){console.log("地址更换"),this._axios()},msg:function(e){this.msgLength=e.length},page:{handler:function(e,t){0==t&&1==e&&(this.timer=setTimeout((function(){}),500))},deep:!0},freight:function(){var t=this;console.log("freight---------------------------------"),t.price1=t.jp_total*t.grade_rate-0+t.freight,t.price2=t.price1.toFixed(2),t.useWallte&&parseFloat(t.user_money)>parseFloat(t.price2)&&(t.value=t.price2),console.log("这是value"),console.log(t.value),t.price2<0&&(t.price2=.01);var a=t.jp_total*t.grade_rate-0+t.freight;a<=0&&(e.showToast({title:"异常交易",icon:"none",duration:1500}),e.navigateBack({delta:1})),t.needpay=t.price2-0-t.value},coupon_name:function(e,t){this.changeValue(e,t)},value:function(e,t){console.log("改变了value"),this.changeValue(e,t),console.log(e,t)},price1:function(e,t){var a=this;this.$nextTick((function(){console.log("me.price0"),console.log(a.price1),console.log("value"),console.log(a.value),a.price1=a.jp_total*a.grade_rate-0+a.freight-a.value,a.price1=Number(a.price1).toFixed(2),console.log("me.price1"),console.log(a.price1),console.log("这是price2"),console.log(a.price2),a.needpay=a.price1}))}}};t.default=g}).call(this,a("543d")["default"])},5156:function(e,t,a){"use strict";a.r(t);var i=a("a15a"),o=a("9804");for(var s in o)"default"!==s&&function(e){a.d(t,e,(function(){return o[e]}))}(s);a("aa5e");var n,r=a("f0c5"),c=Object(r["a"])(o["default"],i["b"],i["c"],!1,null,"60b4472a",null,!1,i["a"],n);t["default"]=c.exports},9804:function(e,t,a){"use strict";a.r(t);var i=a("096a"),o=a.n(i);for(var s in i)"default"!==s&&function(e){a.d(t,e,(function(){return i[e]}))}(s);t["default"]=o.a},a15a:function(e,t,a){"use strict";var i,o=function(){var e=this,t=e.$createElement;e._self._c},s=[];a.d(t,"b",(function(){return o})),a.d(t,"c",(function(){return s})),a.d(t,"a",(function(){return i}))},aa5e:function(e,t,a){"use strict";var i=a("ca54"),o=a.n(i);o.a},ca54:function(e,t,a){}},[["077d","common/runtime","common/vendor"]]]);