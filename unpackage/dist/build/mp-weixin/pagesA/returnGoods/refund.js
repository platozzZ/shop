(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagesA/returnGoods/refund"],{"0111":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n("4795"));n("b206");function a(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t,n,r,a,i,o){try{var c=e[i](o),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function c(e){o(i,r,a,c,s,"next",e)}function s(e){o(i,r,a,c,s,"throw",e)}c(void 0)}))}}var s=function(){Promise.all([n.e("common/vendor"),n.e("components/header")]).then(function(){return resolve(n("6c1c"))}.bind(null,n)).catch(n.oe)},u={data:function(){return{title:"申请售后",delete_img:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon/delete2x.png",xiangji_img:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon/xiangji2x.png",gouhei_img:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon/gouhei2x.png",refund_type:"",order_details_id:"",access_id:"",order:"",returnR:"",money:"",content:"",src:[],srcLength:[3,2,1,0],requestTime:"",requestTime1:0,img_index:-1,return_suess:!1,order_end:"",src_img:[],return_r:1,refund_price:"",refund_price_:"",order_anking:"",fastTap:!0,rType:!1,can_sbm:!0,r_status:"",dsb:!1}},computed:{halfWidth:function(){var t=e.getStorageSync("data_height")?e.getStorageSync("data_height"):this.$store.state.data_height,n=parseInt(t),r=2*n;return e.upx2px(r)+"px"}},watch:{src:function(e,t){this.requestTime=this.src.length}},onLoad:function(t){var n=this;n.$nextTick((function(){n.$refs.lktAuthorizeComp.handleAfterAuth(n,"../../pages/login/login?landing_code=1")})),n.refund_type=t.refund_type,n.order_details_id=t.order_details_id,n.order_anking=t.order_anking,n.access_id=e.getStorageSync("access_id")?e.getStorageSync("access_id"):n.$store.state.access_id,n.r_status=t.r_status,n.r_status&&(n.title="申请售后",n.returnR=1),n._axios(),n.rType=t.rType},methods:{changeLoginStatus:function(){var t=this;t.access_id=e.getStorageSync("access_id"),t._axios()},_button:function(){var t=this;return c(r.default.mark((function n(){var a,o,c,s,u;return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a=t,!a.can_sbm){n.next=7;break}a.dsb=!0,a.can_sbm=!1,setTimeout((function(){a.dsb=!1,a.can_sbm=!0}),1e4),n.next=8;break;case 7:return n.abrupt("return",!1);case 8:if(t.fastTap){n.next=10;break}return n.abrupt("return");case 10:if(t.fastTap=!1,!t.content||!t.rType||0!=a.src.length){n.next=16;break}o={access_id:a.access_id,module:"app",action:"order",app:"ReturnData",order_details_id:a.order_details_id,refund_amount:a.refund_price,explain:a.content,type:a.refund_type},i(o,"access_id",a.access_id),i(o,"refund_apply_money",a.refund_price_),c=o,e.request({url:e.getStorageSync("url"),data:c,header:{"content-type":"application/x-www-form-urlencoded"},method:"POST",success:function(t){var n=t.data,r=n.code,i=n.date,o=n.message;a.dsb=!1,a.can_sbm=!0,200==r?(a.return_suess=!0,a.return_r=4,a.order_end=i,a.fastTap=!0,e.showToast({title:"提交成功",icon:"none",duration:1e3})):e.showToast({title:o,duration:1500,icon:"none"})},fail:function(){a.dsb=!1,a.can_sbm=!0,e.showToast({title:"网络繁忙！",icon:"none",duration:1e3})},complete:function(){a.fastTap=!0,e.hideLoading()}}),n.next=36;break;case 16:if(!(t.content&&a.src.length>0)){n.next=31;break}s=0;case 18:if(!(s<a.src.length)){n.next=29;break}return u={access_id:a.access_id,module:"app",action:"order",app:"ReturnData",order_details_id:a.order_details_id,refund_amount:a.refund_price,explain:encodeURI(a.content),type:a.refund_type},i(u,"access_id",a.access_id),i(u,"upload_z_num",a.src.length),i(u,"upload_num",s),i(u,"refund_apply_money",a.refund_price_),c=u,c.store_type=1,n.next=23,t._upload(s,c);case 23:c=n.sent,console.log(c),s+1==a.src.length&&e.hideLoading();case 26:s++,n.next=18;break;case 29:n.next=36;break;case 31:return t.fastTap=!0,t.content?0!=a.src.length||a.rType||e.showToast({title:"请上传图片！",duration:1e3,icon:"none"}):e.showToast({title:"请填写退款原因！",duration:1e3,icon:"none"}),a.dsb=!1,a.can_sbm=!0,n.abrupt("return",!1);case 36:case"end":return n.stop()}}),n)})))()},_upload:function(t,n){var r=this;return new Promise((function(a){e.uploadFile({url:e.getStorageSync("url"),filePath:r.src[t],name:"file",formData:n,success:function(n){var i=JSON.parse(n.data);if(r.fastTap=!0,200==i.code){if(t++,t==r.src.length){r.return_suess=!0,r.return_r=4;var o=JSON.parse(n.data);r.order_end=o.date,r.fastTap=!0,e.showToast({title:"提交成功",duration:1500,icon:"none"})}a(i)}else e.showToast({title:i.status,duration:1500,icon:"none"})},error:function(){r.fastTap=!0}})}))},_text:function(){200==this.content.length&&e.showToast({title:"字数已达到极限！",duration:1e3,icon:"none"})},_axios:function(){var t=this,n={module:"app",action:"order",app:"return_method",access_id:this.access_id,order_details_id:this.order_details_id};e.request({url:e.getStorageSync("url"),header:{"content-type":"application/x-www-form-urlencoded"},method:"POST",data:n,success:function(n){if(200==n.data.code){var r=n.data.data,a=r.list,i=r.refund_price;t.order=a,t.refund_price_=t.refund_price=i}else e.showToast({title:n.data.message,duration:1500,icon:"none"})},error:function(e){console.log(e)}})},choiceImg:function(t){var n=this,r=this.srcLength[t];e.chooseImage({count:r,success:function(e){n.src=n.src.concat(e.tempFilePaths)}})},_touchstart:function(e){var t=this;this.timeout=setTimeout((function(n){t.img_index=e}),800)},_touchend:function(){clearTimeout(this.timeout)},_delete:function(e){this.src.length>0&&(this.src.splice(e,1),this.img_index=-1)},refund_price_rule:function(){var e=this;e.refund_price_>e.refund_price?e.refund_price_=e.refund_price:(""==e.refund_price_||e.refund_price_<0)&&(e.refund_price_=e.refund_price)}},components:{heads:s}};t.default=u}).call(this,n("543d")["default"])},"2d11":function(e,t,n){"use strict";n.r(t);var r=n("0111"),a=n.n(r);for(var i in r)"default"!==i&&function(e){n.d(t,e,(function(){return r[e]}))}(i);t["default"]=a.a},"32aa":function(e,t,n){"use strict";var r=n("a76a"),a=n.n(r);a.a},a76a:function(e,t,n){},e3fd:function(e,t,n){"use strict";var r,a=function(){var e=this,t=e.$createElement;e._self._c},i=[];n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return r}))},fcb1:function(e,t,n){"use strict";(function(e){n("a1f9");r(n("66fd"));var t=r(n("feed"));function r(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("543d")["createPage"])},feed:function(e,t,n){"use strict";n.r(t);var r=n("e3fd"),a=n("2d11");for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);n("32aa");var o,c=n("f0c5"),s=Object(c["a"])(a["default"],r["b"],r["c"],!1,null,"4fd94f36",null,!1,r["a"],o);t["default"]=s.exports}},[["fcb1","common/runtime","common/vendor"]]]);