(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagesA/search/searchResult"],{"02c4":function(t,e,a){"use strict";a.r(e);var o=a("b11c"),n=a.n(o);for(var i in o)"default"!==i&&function(t){a.d(e,t,(function(){return o[t]}))}(i);e["default"]=n.a},"1ad2":function(t,e,a){"use strict";var o,n=function(){var t=this,e=t.$createElement;t._self._c},i=[];a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return i})),a.d(e,"a",(function(){return o}))},"36e1":function(t,e,a){},"69eb":function(t,e,a){"use strict";(function(t){a("a1f9");o(a("66fd"));var e=o(a("c58e"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,a("543d")["createPage"])},a6ac:function(t,e,a){"use strict";var o=a("36e1"),n=a.n(o);n.a},b11c:function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=a("2f62");function n(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,o)}return a}function i(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?n(Object(a),!0).forEach((function(e){s(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function s(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function r(t){return l(t)||h(t)||u(t)||c()}function c(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(t,e){if(t){if("string"===typeof t)return d(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(a):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?d(t,e):void 0}}function h(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function l(t){if(Array.isArray(t))return d(t)}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,o=new Array(e);a<e;a++)o[a]=t[a];return o}var p=function(){Promise.all([a.e("common/vendor"),a.e("components/header")]).then(function(){return resolve(a("6c1c"))}.bind(null,a)).catch(a.oe)},g=function(){a.e("components/uni-load-more").then(function(){return resolve(a("ef75"))}.bind(null,a)).catch(a.oe)},f={data:function(){return{title:"搜索结果",back_img:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/back2x.png",empic_img:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon/spnull2x.png",serchimg:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/searchh.png",shoppingImg:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/shopping2x.png",host:"",searchtxt:"",storag:"",prompt:"",searchgoods:"",success:!0,s_type:"",page:1,allLoaded:!1,autoFill:!1,bottomStatus:"",bottomPullText:"上拉加载更多...",bottomDropText:"释放更新...",loading:!1,topTabBar:0,placeStyle:"color:#999999",loadingType:0,mask_display1:!1,attribute_id:"",attrList:"",skuBeanList:"",num:"",price:"",imgurl:"",haveSkuBean:"",shopping_id:"",closeImg:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon/guanbi2x.png",jian_hui:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon/jianhui2x.png",jian_hei:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon/jian2x.png",jia_hei:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon/jia+2x.png",jia_hui:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon/add+2x.png",fastTap:!0,proid:"",numb:1}},onReachBottom:function(){var e=this;if(0==this.loadingType){this.loadingType=1,this.page++;var a={module:"app",action:"search",app:"search",num:this.page,type:this.topTabBar};this.$req.post({data:a}).then((function(a){var o,n=a.data,i=a.code,s=a.message;200==i?((o=e.searchgoods).push.apply(o,r(n)),n.length>9?e.loadingType=0:e.loadingType=2):(e.loadingType=0,t.showToast({title:s,duration:1500,icon:"none"}))}))}},onLoad:function(t){var e=this;this.searchtxt=t.searchtxt,this.topTabBar=parseInt(t.topTabBar),this.s_type=this.$store.state.type,this.$nextTick((function(){e._axios()}))},components:{heads:p,uniLoadMore:g},computed:{halfWidth:function(){var e=t.getStorageSync("data_height")?t.getStorageSync("data_height"):this.$store.state.data_height,a=parseInt(e);return a=0,a+"px"}},methods:i({_spec:function(){for(var t=this,e=t.attrList,a=t.skuBeanList,o=0;o<e.length;o++){for(var n=e[o],i=[],s=0;s<e.length;s++){var r=e[s];if(r.id!=n.id)for(var c=0;c<r.attr.length;c++){var u=r.attr[c];u.enable&&u.select&&i.push(u)}}for(var h=[],l=0;l<a.length;l++){var d=!0,p=a[l];for(s=0;s<i.length;s++){var g=!1;for(c=0;c<p.attributes.length;c++){var f=p.attributes[c];if(i[s].attributeId==f.attributeId&&i[s].id==f.attributeValId){g=!0;break}}d=g&&d}if(d)for(var m=0;m<p.attributes.length;m++){f=p.attributes[m];n.id==f.attributeId&&h.push(f.attributeValId)}}for(var _=0;_<n.attr.length;_++){var b=n.attr[_];b.enable=Number(a[_].count)}}t.attrList=e,t.skuBeanList=a},_shopping:function(e){var a=this,o=this;if(this.haveSkuBean){var n={module:"app",action:"product",app:"add_cart",pro_id:this.proid,attribute_id:this.haveSkuBean.cid,num:this.numb,type:"addcart",access_id:this.$store.state.access_id};t.request({data:n,url:t.getStorageSync("url"),header:{"content-type":"application/x-www-form-urlencoded"},method:"POST",success:function(e){console.log(e);var n=e.data,i=n.code,s=n.data,r=n.message;console.log(i,r),200==i?(t.showToast({title:"添加成功，在购物车等您哦~",duration:1e3,icon:"none"}),o.access_id=s.access_id,o.$store.state.access_id=s.access_id,a.fastTap=!0,o.haveSkuBean="",o._mask_f()):(console.log(r),a.fastTap=!0)},error:function(t){console.log(t),this.fastTap=!0}})}else console.log(o.haveSkuBean),this._mask_display(),this.fastTap=!0},_confirm1:function(){this.fastTap&&(this.fastTap=!1,Boolean(this.haveSkuBean)?0==this.num?(t.showToast({title:"库存不足",duration:1e3,icon:"none"}),this.fastTap=!0):0!=this.num&&this._shopping():0==this.num?(t.showToast({title:"库存不足",duration:1e3,icon:"none"}),this.fastTap=!0):(t.showToast({title:"请选择完整的商品规格！",duration:1e3,icon:"none"}),this.fastTap=!0),console.log(this.haveSkuBean))},showState:function(t,e,a,o){console.log(t,e);var n=this.attrList,i=n[e],s=i.attr[t];if(console.log(s),s.enable){console.log(s.enable,s.select);for(var r=!s.select,c=0;c<i.attr.length;c++)i.attr[c].select=!1;s.select=r;for(var u=[],h=0;h<n.length;h++)for(var l=0;l<n[h].attr.length;l++)n[h].attr[l].enable&&n[h].attr[l].select&&u.push(n[h].attr[l]);for(var d=this.skuBeanList,p=[],g=0;g<d.length;g++){for(var f=0,m=0;m<d[g].attributes.length;m++)u.length==d[g].attributes.length?d[g].attributes[m].attributeValId==u[m].id&&f++:"库存清单不存在此属性 ";f==d[g].attributes.length&&p.push(d[g])}for(var _=0;_<u.length;_++)u[_].attributeValue+" ";console.log(p),0!=p.length?(console.log(p[0]),this.num=p[0].count,this.price=p[0].price,this.imgurl=p[0].imgurl,this.haveSkuBean=p[0]):(a?this.num=a:this.searchgoods.length>1?this.num=this.searchgoods[t]?this.searchgoods[t].stock:"":this.skuBeanList&&(this.num=this.skuBeanList[t].count),o?this.price=o:this.searchgoods.length>1?this.num=this.searchgoods[t]?this.searchgoods[t].price:"":this.skuBeanList,this.haveSkuBean=""),this.attrList=n,this._spec()}else console.log("return")},changeStock:function(e){this.haveSkuBean?1==e?this.numb>1?this.numb--:this.numb:2==e&&(this.numb<Number(this.num)?this.numb++:t.showToast({title:"已经超过购买限额",duration:1e3,icon:"none"})):t.showToast({title:"请先选择商品规格",duration:1e3,icon:"none"})},_mask_f:function(){this.haveSkuBean="",this.mask_display1=!1},shopping_j:function(e){var a=this;if(console.log(this.fastTap),this.fastTap){this.fastTap=!1,this.proid=e;var o={module:"app",action:"product",app:"index",pro_id:e};t.request({data:o,url:t.getStorageSync("url"),header:{"content-type":"application/x-www-form-urlencoded"},method:"POST",success:function(t){a.fastTap=!0,console.log(t);var e=t.data.data,o=(e.collection_id,e.pro),n=(e.comments,e.attrList),i=e.skuBeanList,s=e.qj_price,r=e.type;a.ys_price=s,a.price=s,a.attrList=n,console.log(a.attrList),a.skuBeanList=i,a.collection=r,a.imgurl=o.img_arr[0],a.num=o.num,a._spec(),a.mask_display1=!0,a.numb=1},error:function(t){console.log(t),a.fastTap=!0}})}},handleinput:function(){t.hideKeyboard(),t.navigateBack({delta:1})},_goBack:function(){t.navigateBack({delta:2})},_home:function(){t.switchTab({url:"../../pages/tabBar/home"})},_axios:function(){var e=this,a={module:"app",action:"search",app:"search",num:this.page,type:this.topTabBar};a.keyword=this.searchtxt,""!=this.searchtxt&&t.request({data:a,url:t.getStorageSync("url"),success:function(a){if(console.log(a),200==a.data.code){var o=a.data.data;o.length?(e.searchgoods=o,e.success=!0,e.searchgoods.length<10?e.allLoaded=!0:e.allLoaded=!1,o.length>9?e.loadingType=0:e.loadingType=2):(e.searchgoods="未找到相关宝贝",e.success=!1)}else e.success=!1,t.showToast({title:a.data.message,duration:1500,icon:"none"})},error:function(t){console.log(t),e.searchgoods="加载失败，请重新输入！",e.success=!1}})},_search:function(t){this.searchgoods="",this.topTabBar=t,this.success=!0,this.page=1,this._axios()},_goStore:function(e){t.navigateTo({url:"../../pagesA/store/store?shop_id="+e})},loadBottom:function(){var e=this,a={module:"app",action:"search",app:"search",page:this.page};this.searchgoods.length>0&&t.request({data:a,url:t.getStorageSync("url"),header:{"content-type":"application/x-www-form-urlencoded"},method:"POST",success:function(a){if(200==a.data.code){console.log(a);var o=a.data.data;e.page+=1,o.length<10&&o.length>0?e.searchgoods=e.searchgoods.concat(o):(e.allLoaded=!0,e.loading=!0),e.$refs.loadmore.onBottomLoaded()}else t.showToast({title:a.data.message,duration:1500,icon:"none"})},error:function(t){console.log(t)}})},handleBottomChange:function(t){this.bottomStatus=t},_goods:function(e){this.pro_id(e),t.navigateTo({url:"../../pages/goods/goodsDetailed"})}},(0,o.mapMutations)({pro_id:"SET_PRO_ID",type:"SET_TYPE",scroll_t:"SET_SCROLL_T"})),beforeDestroy:function(){this.type("")},updated:function(){this.$nextTick((function(){this.$store.state.scroll_t}))}};e.default=f}).call(this,a("543d")["default"])},c58e:function(t,e,a){"use strict";a.r(e);var o=a("1ad2"),n=a("02c4");for(var i in n)"default"!==i&&function(t){a.d(e,t,(function(){return n[t]}))}(i);a("a6ac");var s,r=a("f0c5"),c=Object(r["a"])(n["default"],o["b"],o["c"],!1,null,"818dcbe0",null,!1,o["a"],s);e["default"]=c.exports}},[["69eb","common/runtime","common/vendor"]]]);