(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagesA/group/group_end","components/lktauthorize"],{"0102":function(t,e,o){"use strict";var i=o("6c30"),n=o.n(i);n.a},"0db0":function(t,e,o){"use strict";var i,n=function(){var t=this,e=t.$createElement;t._self._c},a=[];o.d(e,"b",(function(){return n})),o.d(e,"c",(function(){return a})),o.d(e,"a",(function(){return i}))},"11c5":function(t,e,o){"use strict";o.r(e);var i=o("ed4d"),n=o.n(i);for(var a in i)"default"!==a&&function(t){o.d(e,t,(function(){return i[t]}))}(a);e["default"]=n.a},"2ad6":function(t,e,o){"use strict";var i,n=function(){var t=this,e=t.$createElement;t._self._c},a=[];o.d(e,"b",(function(){return n})),o.d(e,"c",(function(){return a})),o.d(e,"a",(function(){return i}))},"3d65":function(t,e,o){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n(o("7f08"));n(o("cc2e")),o("2f62"),o("b206");function n(t){return t&&t.__esModule?t:{default:t}}var a=function(){Promise.all([o.e("common/vendor"),o.e("components/header")]).then(function(){return resolve(o("6c1c"))}.bind(null,o)).catch(o.oe)},s=function(){Promise.all([o.e("common/vendor"),o.e("components/mpvue-wxparse/src/wxParse")]).then(function(){return resolve(o("7308"))}.bind(null,o)).catch(o.oe)},r={data:function(){return{gdOuterImg:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/gd_outer.png",overflow:"scroll",mask_display1:!1,fastTap:!0,list_bg1:"",list_bg2:"",list_bg3:"",list_bg4:"",is_end:!1,title:"一起拼团",access_id:"",ptcode:"",img:"",attr__:"",isload:"",login:"",data_:"",saves:"",groupmsg:"",attrList:"",skuBeanList:"",groupList:"",load:!0,timeStr:"",groupMember:[],shareMask:!1,saveEWM:!1,shares:{},show_rule:!1,rule:"",shareContent:"一起来用雪地吧！",shareHref:"",sharehrefTitle:"一起来用雪地吧1",sharehrefDes:"一起来用雪地吧2",ewmImg:"",mask_display:!1,num:"",price:"",imgurl:"",numb:1,haveSkuBean:"",goodscode:"",head:!0,clickFlag:!1,loseEfficacyImg:"",isshow:!0,returnR:"",otype:"",friend:!1,isonload:0,user_can_open:"",user_can_can:"",group_again_by:"",inter:"",activity_no:"",list_img:"https://laikeds.oss-cn-shenzhen.aliyuncs.com/1/0/1548123520934.jpeg",list_bg_pic:"background-image: url("+this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/bj.png)",success_gou_img:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/group_end_success.png",shopImg:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/shopping_l2x.png",you_img:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/jiantou2x.png",noImg:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/icon-no.png",guan_img:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/guanbi2x.png",jian_hei:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/jian2x.png",jian_hui:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/jianhui2x.png",loadImg:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/loading.gif",jia_hei:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/jia+2x.png",jia_hui:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/add+2x.png",wx_person:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/fdc.png",wx_ewmfxt:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/ewmShare.png",wx_img:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/wechat.png",erm_img:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/ewmShare.png",back1:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/back2x.png"}},onLoad:function(e){var o=this,i=new Promise((function(t,e){o.LaiKeTuiCommon.getLKTApiUrl().then((function(){t(1231)}))}));i.then((function(){o.mask_display=!1,o.returnR=e.returnR,o.otype=e.otype,o.sNo=e.sNo,o.friend=e.friend,o.activity_no=e.activity_no,o.access_id=t.getStorageSync("access_id")?t.getStorageSync("access_id"):o.$store.state.access_id,o._axios()}))},onShow:function(){var e=this;e.mask_display=!1,e.isload=!0,0==e.isonload?e.isonload=1:(e.access_id=t.getStorageSync("access_id")?t.getStorageSync("access_id"):e.$store.state.access_id,e._axios())},onShareAppMessage:function(t){return t.from,{title:this.groupmsg.p_name,path:"/pagesA/group/group_end?sNo="+this.sNo+"&activity_no="+me.activity_no+"&friend=true&isfx=true&cc=1",imageUrl:this.groupmsg.img,success:function(t){}}},methods:{changeLoginStatus:function(){var t=this;t.access_id=t.$store.state.access_id,t._axios()},gotoHomePage:function(){var e=this;e.clickFlag||(e.clickFlag=!0,t.navigateTo({url:"./groupDetailed?pro_id="+e.groupmsg.ptgoods_id+"&activity_no="+this.activity_no}))},_axios:function(){var e=this,o={module:"app",action:"groupbuy",m:"cangroup",oid:this.sNo,access_id:this.access_id};t.request({data:o,url:t.getStorageSync("url"),header:{"content-type":"application/x-www-form-urlencoded"},method:"POST",success:function(t){if(404!=t.data.code){e.attrList=t.data.attrList,e.skuBeanList=t.data.skuBeanList,e.groupList=t.data.groupList,e.groupmsg=t.data.groupmsg,e.user_can_can=t.data.user_can_can,e.user_can_open=t.data.user_can_open,e.group_again_by=t.data.group_again_by,e.rule=t.data.rule,e.content="<div style='padding-left:8px;padding-right:8px;'>"+e.rule.replace(new RegExp("<view","gm"),"<p").replace(new RegExp("</view>","gm"),"</p>")+"</div>";var o=e.content.replace(/\\/g,"").replace(/<img/g,'<img style="display:none;"');o=o.replace("<div style='padding-left:8px;padding-right:8px;'>",'<div style="padding: 0 15px;">'),console.log(o),e.contentNodes=(0,i.default)(o),console.log(),console.log(e.groupmsg.leftTime),Number(e.groupmsg.leftTime)>0?(console.log(">0"),e.is_end=!1):e.is_end=!0,console.log("====================is_end"),console.log(e.is_end),e.imgurl=e.groupmsg.img,e.num=e.groupmsg.p_num,e.login=t.data.islogin,console.log("login"),console.log(e.login),e.ptcode=t.data.ptcode,e.goodscode=t.data.goodscode;for(var n=e.groupmsg.price,a=0;a<e.attrList[0].attr.length;a++)console.log("2222---"),console.log(e.attrList[0].attr[a].enable),e.attrList[0].attr[a].enable&&e.attrList[0].attr[a].select&&(n=e.attrList[0].attr[a].price);e.price=e._money(n,e.groupmsg.zekou),console.log("price"),console.log(e.price),e.load=!1,console.log("返回的结果"),console.log(t.data),console.log(e.goodscode),e.orderNo=t.data.groupmsg.id,e.orderStatus=t.data.groupmsg.status,1==t.data.isshow?e.isshow=!0:e.isshow=!1,console.log("show"),console.log(e.isshow),e.loseEfficacyImg=t.data.loseEfficacyImg,e.groupList.length&&e.setTimeList(e.groupList),clearInterval(e.inter),e.setTimeData(e.groupmsg.leftTime);var s=[];for(a=e.groupmsg.groupman-1;a>=0;a--)t.data.groupMember[a]?s[a]=t.data.groupMember[a]:s[a]={};e.groupMember=s,e._spec(),e.attr__=e.attr_=t.data.attrList[0].attr,e.data_=t.data,e.isload=!1,e.price=t.data.min_price;for(a=0;a<e.attr_.length;a++)console.log("me.attr"),console.log(e.attr_),console.log(e.attr__),e.attr_[a].select&&e.attr_[a].enable&&(console.log(e.data_),e.num=e.attr_[a].count,e.haveSkuBean=e.data_.skuBeanList[a],console.log("me.haveSkuBean"),console.log(e.haveSkuBean),e.isshopping,e.market_price=e.market_price2=e.attr_[a].price)}else e.$refs.lktAuthorizeComp.handleAfterAuth(e,"../../pages/login/login?landing_code=1")},error:function(t){console.log(t),e.load=!1}})},_money:function(t,e){t=e*t/100;var o=t.toFixed(2);return o},setTimeData:function(t){var e=this;console.log(t),e.inter=setInterval((function(){if(t<=0)return clearInterval(e.inter),e.timeStr="00:00:00",!1;var o=--t,i=Math.floor(o/60/60),n=Math.floor((o-60*i*60)/60),a=o%60;i<10&&(i="0"+i),n<10&&(n="0"+n),a<10&&(a="0"+a),e.timeStr=i+":"+n+":"+a}),1e3)},setTimeList:function(t){var e=this,o=t;setInterval((function(){for(var t=0;t<o.length;t++){var i=--o[t].leftTime,n=Math.floor(i/60/60),a=Math.floor((i-60*n*60)/60),s=i%60;n<10&&(n="0"+n),a<10&&(a="0"+a),s<10&&(s="0"+s),o[t].leftTimeStr=n+":"+a+":"+s,o[t].leftTime<=0&&(o[t].leftTimeStr="00:00:00")}e.groupList=o}),1e3)},_downEWM:function(){var e=this;console.log("需要保存到本地的图片地址："+e.ewmImg_url),t.getImageInfo({src:e.ewmImg_url,success:function(e){console.log(e.path),t.saveImageToPhotosAlbum({filePath:e.path,success:function(){t.showToast({title:"保存图片成功",duration:1500,icon:"none"})},fail:function(){t.showToast({title:"保存图片失败！",duration:1500,icon:"none"})}})},fail:function(){t.showToast({title:"保存图片失败",duration:1500,icon:"none"})}})},_shareShow:function(){var e=this,o=e.groupmsg;t.share({provider:"weixin",scene:"WXSenceTimeline",type:0,href:t.getStorageSync("h5_url")+"pagesA/group/group_end?sNo="+e.sNo+"&activity_no="+e.activity_no+"&friend=true&isfx=true&cc=2",title:o.p_name,summary:"",imageUrl:o.img,success:function(t){console.log("success:"+JSON.stringify(t))},fail:function(t){console.log("fail:"+JSON.stringify(t))}})},_showPerson:function(){var e=this,o=e.groupmsg;t.share({provider:"weixin",scene:"WXSceneSession",type:0,href:t.getStorageSync("h5_url")+"pagesA/group/group_end?sNo="+e.sNo+"&activity_no="+e.activity_no+"&friend=true&isfx=true&cc=3",title:o.p_name,summary:"",imageUrl:o.img,success:function(t){console.log("success:"+JSON.stringify(t))},fail:function(t){console.log("fail:"+JSON.stringify(t))}})},showShareMask:function(){var t=this;console.log("__________activity_no"),console.log(t.activity_no),t.$refs.lktAuthorizeComp.handleAfterAuth(t,"../../pages/login/login?landing_code=1",(function(){t.shareMask=!0}))},closeShareMask:function(){this.saveEWM=!1,this.shareMask=!1,this.overflow="scroll"},_closeAllMask:function(){this.shareMask=!1,this.saveEWM=!1,this.overflow="scroll"},showSaveEWM:function(e){var o=this,i={module:"app",action:"getcode",m:"share",proId:this.groupmsg.ptgoods_id,access_id:this.access_id,type:"pt_end",sNo:o.sNo};console.log("err1"),"wx"==e&&(i.store_type=1),i.store_type="ali"==e?3:2,console.log("err2"),t.request({data:i,url:t.getStorageSync("url"),header:{"content-type":"application/x-www-form-urlencoded"},method:"POST",success:function(e){console.log("err3"),200==e.data.code?(o.ewmImg=t.getStorageSync("endurl")+e.data.imgUrl,o.ewmImg_url=t.getStorageSync("endurl")+e.data.imgUrl,console.log("me.ewmImg_url"),console.log(o.ewmImg_url),o.saveEWM=!0,o.shareMask=!0,console.log("err4")):404==e.data.code?(o.$refs.lktAuthorizeComp.handleAfterAuth(o,"../../pages/login/login?landing_code=1"),console.log("err5")):(t.showToast({title:e.data.message,duration:1500,icon:"none"}),console.log("err6")),console.log("======="),console.log(o.shareMask),console.log(o.saveEWM),console.log("err7"),console.log(e)}})},_navigateTo:function(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if("todetail"==o)console.log("todetail============if"),console.log(o),t.navigateTo({url:e});else{if(console.log("else=============="),"true"!=this.friend)return 1==Number(this.returnR)?(console.log("back_1"),t.navigateBack({delta:1}),!1):2==Number(this.returnR)?(console.log("back_2"),t.navigateBack({delta:2}),!1):(t.reLaunch({url:"../../pagesA/group/group"}),!1);console.log("back_home"),t.reLaunch({url:"../../pages/tabBar/home"})}},_toDetail:function(){if(this.is_end)return t.navigateTo({url:"../group/group"}),!1;t.navigateTo({url:"../group/groupDetailed?pro_id="+this.groupmsg.ptgoods_id+"&activity_no="+this.activity_no})},_toOrderDetail:function(){t.navigateTo({url:"../../pages/order/order?order_id="+this.orderNo+"&returnR=1"})},_reduce:function(){this.numb>1&&Boolean(this.haveSkuBean)?this.numb--:(this.numb,t.showToast({title:"数量已经减少到最低了哦！",duration:1e3,icon:"none"}))},_add:function(){Boolean(this.haveSkuBean)?3!=this.type||""!=this.num_peo?this.num<=this.numb?t.showToast({title:"库存不足！",duration:1e3,icon:"none"}):this.numb++:t.showToast({title:"请选择完整拼团人数！",duration:1e3,icon:"none"}):t.showToast({title:"请选择完整商品规格！",duration:1e3,icon:"none"})},showrule:function(){var t=this;t.show_rule=!0},closerule:function(){var t=this;t.show_rule=!1},_buy:function(){var e=this;e.fastTap=!1,e.access_id=t.getStorageSync("access_id")?t.getStorageSync("access_id"):this.$store.state.access_id,e.$refs.lktAuthorizeComp.handleAfterAuth(e,"../../pages/login/login?landing_code=1",(function(){return 1==e.goodscode.g_status?(t.showToast({title:"活动暂未开始，无法购买！",duration:1e3,icon:"none"}),!1):3==e.goodscode.g_status?(t.showToast({title:"活动已结束，无法购买！",duration:1e3,icon:"none"}),!1):e.group_again_by?e.user_can_can?(e._mask_display(),void(e.fastTap=!0)):(t.showToast({title:"已达参团上限，无法继续参团！",duration:1e3,icon:"none"}),!1):(t.showToast({title:"此商品无法再次参团！",duration:1e3,icon:"none"}),!1)}))},_gocantuan:function(e){t.navigateTo({url:"../group/group_end?sNo="+e})},_selectG:function(){this.type=1,this._mask_display()},in_array:function(t,e){for(var o=0;o<e.length;o++){var i=e[o].toString();if(i==t)return!0}return!1},_mask_display:function(){this.mask_display=!0,this.overflow="hidden"},_mask_false:function(){var t=this;this.haveSkuBean="",this.overflow="scroll",this.mask_display1=!0,setTimeout((function(){t.mask_display=!1,t.mask_display1=!1}),500);for(var e=0;e<this.attrList.length;e++)for(var o=0;o<this.attrList[e].attr.length;o++)this.attrList[e].attr[o].select=!1},_mask_f:function(){this.haveSkuBean="",this._mask_false(),this.overflow="scroll"},_confirm:function(){var e=this;if(Boolean(this.haveSkuBean)){if(0==this.num)t.showToast({title:"库存不足",duration:1e3,icon:"none"});else if(0!=this.num){var o={};o["pid"]=this.groupmsg.ptgoods_id,o["cid"]=this.haveSkuBean.cid,o["num"]=this.numb,o["groupnum"]=this.groupmsg.groupman,o["ptcode"]=this.ptcode,o["price"]=this.price,o["price"]=this.price,o["activity_no"]=this.activity_no,o["frompage"]="cantuan",o=JSON.stringify(o),t.navigateTo({url:"../group/payfor?product="+o+"&returnR=1"}),e.fastTap=!0}}else""==this.haveSkuBean?t.showToast({title:"请选择完整的商品规格！",duration:1e3,icon:"none"}):0==this.num?t.showToast({title:"库存不足",duration:1e3,icon:"none"}):t.showToast({title:"请选择完整的商品规格！",duration:1e3,icon:"none"})},_spec:function(){for(var t=this.attrList,e=0;e<t.length;e++){for(var o=t[e],i=[],n=0;n<t.length;n++){var a=t[n];if(a.id!=o.id)for(var s=0;s<a.attr.length;s++){var r=a.attr[s];r.enable&&r.select&&i.push(r)}}for(var c=[],u=this.skuBeanList,l=0;l<u.length;l++){var g=!0,d=u[l];for(n=0;n<i.length;n++){var h=!1;for(s=0;s<d.attributes.length;s++){var _=d.attributes[s];if(i[n].attributeId==_.attributeId&&i[n].id==_.attributeValId){h=!0;break}}g=h&&g}if(g)for(var m=0;m<d.attributes.length;m++){_=d.attributes[m];o.id==_.attributeId&&c.push(_.attributeValId)}}for(var f=c,p=0;p<o.attr.length;p++){var v=o.attr[p];v.enable=-1!=f.indexOf(v.id)}}this.attrList=t,this.skuBeanList=u},showState:function(t,e){var o=this.attrList,i=o[e],n=i.attr[t];if(n.enable){for(var a=!n.select,s=0;s<i.attr.length;s++)i.attr[s].select=!1;n.select=a;for(var r=[],c=0;c<o.length;c++)for(var u=0;u<o[c].attr.length;u++)o[c].attr[u].enable&&o[c].attr[u].select&&r.push(o[c].attr[u]);for(var l=this.skuBeanList,g=[],d=0;d<l.length;d++){for(var h=0,_=0;_<l[d].attributes.length;_++)r.length==l[d].attributes.length?l[d].attributes[_].attributeValId==r[_].id&&h++:"库存清单不存在此属性 ";h==l[d].attributes.length&&g.push(l[d])}for(var m=0;m<r.length;m++)r[m].attributeValue+" ";if(0!=g.length){var f=g[0].price;f=this._money(f,this.groupmsg.zekou),this.num=g[0].count,this.price=f,this.imgurl=g[0].imgurl,this.haveSkuBean=g[0]}else console.log(2),this.num=1,this.price=this.groupmsg.price,this.haveSkuBean="";this.attrList=o,this._spec()}}},components:{Heads:a,wxParse:s}};e.default=r}).call(this,o("543d")["default"])},"426e":function(t,e,o){},"68c6":function(t,e,o){"use strict";(function(t){o("a1f9");i(o("66fd"));var e=i(o("9b67"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,o("543d")["createPage"])},"6c30":function(t,e,o){},"9b67":function(t,e,o){"use strict";o.r(e);var i=o("2ad6"),n=o("a834");for(var a in n)"default"!==a&&function(t){o.d(e,t,(function(){return n[t]}))}(a);o("0102");var s,r=o("f0c5"),c=Object(r["a"])(n["default"],i["b"],i["c"],!1,null,"fd0a54c4",null,!1,i["a"],s);e["default"]=c.exports},a834:function(t,e,o){"use strict";o.r(e);var i=o("3d65"),n=o.n(i);for(var a in i)"default"!==a&&function(t){o.d(e,t,(function(){return i[t]}))}(a);e["default"]=n.a},b5c8:function(t,e,o){"use strict";var i=o("426e"),n=o.n(i);n.a},cc2e:function(t,e,o){"use strict";o.r(e);var i=o("0db0"),n=o("11c5");for(var a in n)"default"!==a&&function(t){o.d(e,t,(function(){return n[t]}))}(a);o("b5c8");var s,r=o("f0c5"),c=Object(r["a"])(n["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],s);e["default"]=c.exports},ed4d:function(t,e,o){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o={data:function(){return{showWin:!1,access_id:""}},props:["login_status"],methods:{closeWin:function(){this.showWin=!1,this.$emit("cancle")},handleAfterAuth:function(e,o,i,n){var a=this,s=e;s.LaiKeTuiCommon.getLKTApiUrl().then((function(){var e=t.getStorageSync("LoingByHand"),r=t.getStorageSync("needRegister");console.log("========needRegister======="+r),console.log("========LKT_NRL_TYPE.NRL======="+s.LaiKeTuiCommon.LKT_NRL_TYPE.NRL),console.log("========LoingByHand======="+e),console.log("========ddd======="+(r==s.LaiKeTuiCommon.LKT_NRL_TYPE.NRL&&!e)),r!=s.LaiKeTuiCommon.LKT_NRL_TYPE.NRL||e?a.LaiKeTuiCommon.laikeCheckTimeout(s).then((function(e){e.visitor?(t.showToast({title:"请登录！",icon:"none",duration:1e3}),setTimeout((function(){o?t.navigateTo({url:o}):t.navigateTo({url:"../login/login"})}),1e3)):i&&"function"==typeof i&&(n?i(n):i())})):a.LaiketuiWeixinAuth.laiketui_mp_weixin_checksession(a,s,i,n)}))},bindGetUserInfo:function(t){var e=this;this.LaiketuiWeixinAuth.laiketui_mp_weixin_auth(t,e)},ttAuth:function(t){var e=this;this.LaiketuiTTAuth.laiketui_mp_tt_userInfo(e)},bdAuth:function(t){var e=this;this.LaiketuiBDAuth.laiketui_mp_baidu_userInfo(e)},onGetAuthorize:function(t){var e=this;e.LaiketuiAliAuth.laiketui_mp_alipay_userInfo(t,e)}}};e.default=o}).call(this,o("543d")["default"])}},[["68c6","common/runtime","common/vendor"]]]);