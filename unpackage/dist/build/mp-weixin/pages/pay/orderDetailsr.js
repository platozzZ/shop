(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/pay/orderDetailsr"],{"1f4e":function(e,t,a){"use strict";var i,o=function(){var e=this,t=e.$createElement;e._self._c;e._isMounted||(e.e0=function(e){return e.stopPropagation(),(!0)(e)})},s=[];a.d(t,"b",(function(){return o})),a.d(t,"c",(function(){return s})),a.d(t,"a",(function(){return i}))},"2bc5":function(e,t,a){"use strict";a.r(t);var i=a("1f4e"),o=a("d58e");for(var s in o)"default"!==s&&function(e){a.d(t,e,(function(){return o[e]}))}(s);a("89cf");var n,r=a("f0c5"),d=Object(r["a"])(o["default"],i["b"],i["c"],!1,null,"13ff9f4e",null,!1,i["a"],n);t["default"]=d.exports},"89cf":function(e,t,a){"use strict";var i=a("c075"),o=a.n(i);o.a},c075:function(e,t,a){},d58e:function(e,t,a){"use strict";a.r(t);var i=a("dc43"),o=a.n(i);for(var s in i)"default"!==s&&function(e){a.d(t,e,(function(){return i[e]}))}(s);t["default"]=o.a},dc43:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,o=a("2f62"),s=(a("b206"),a("6ea9"));function n(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function r(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?n(Object(a),!0).forEach((function(t){d(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function d(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var c=function(){Promise.all([a.e("common/vendor"),a.e("components/header")]).then(function(){return resolve(a("6c1c"))}.bind(null,a)).catch(a.oe)},_=function(){a.e("components/maskM").then(function(){return resolve(a("79a9"))}.bind(null,a)).catch(a.oe)},u=function(){Promise.all([a.e("common/vendor"),a.e("components/mpvue-wxparse/src/wxParse")]).then(function(){return resolve(a("7308"))}.bind(null,a)).catch(a.oe)},l=function(){a.e("components/paymodel").then(function(){return resolve(a("dc18"))}.bind(null,a)).catch(a.oe)},p=(i={data:function(){return{open_wxpay:!1,open_alipay:!1,open_wallet:!1,payment:"",afhalen:!1,afhalen_translateX:"0",order_no:"",bargain_id:"",isDistribution:!1,order_list:"",showPayWay1:!1,showPayWay:!1,makeOrd:!1,load:!0,ycoupon_name:"",notWallte:!1,useWallte:!1,returnR:"",value:"",value2:"",cpId:"",title:"确认订单信息",adds:"",adds_f:"",price:"",price1:this.products_total+this.freight-this.coupon_name-Number(this.reduce_money),price2:0,remarks:"",_isopen:!0,products_total:"",reduce_money:"",is_subtraction:1,reduce_name:"",pro:"",user_money:"",needpay:"",jiantou:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon/jiantou2x.png",storeImg:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon/store.png",guanbiImg:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon/close2x.png",pay_y:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon/yuezhifu2x.png",pay_z:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon/zhifubaozhifu2x.png",pay_w:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon/weixinzhifu2x.png",pay_bd:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon/baiduzhifu2x.png",pay_b:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon/lALPBb.png",quan_hui:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon/xuanzehui2x.png",quan_hei:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon/xuanzehei2x.png",zfb:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon/zhifubaozhifu2x.png",wx:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon/weixinzhifu2x.png",yezf:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon/yuezhifu2x.png",loadGif:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon/5-121204193R7.gif",back1:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon/back2x.png",ishide:0,loading:!1,pay:[{imgUrl:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/yuezhifu2x.png",name:"钱包余额"},{imgUrl:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/weixinzhifu2x.png",name:"微信支付"},{imgUrl:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon1/zhifubaozhifu2x.png",name:"支付宝"}],pay_index:-1,pay_style:"",content:"是否抵扣余额？",mask_value:"",orde_id:"",addre_id:"",or_id:"",sNo:"",num:"",access_id:"",digits:["","","","","",""],msg:"",msgLength:0,page:0,pay_display:!1,password_status:"",password_display:!1,use_coupon:!1,coupon_money:"",coupon_list:"",coupon_id:[],coupon_name:"",coupon_name1:"",coupon_status:!1,freight:"",freightt:"",name:"",channel:"",erroTime:0,enterless:!0,is_distribution:0,discount:1,grade_rate:1,cart_id:"",address_id:"",hc_address_id:"",focus:!0,providerList:"",address:{name:""},aliPayStatue:!1,wxPayStatue:!1,baidupayStatue:!1,fastTap:!0,bind_id:"",pay_name:"",jp_address:"",jp_imgurl:"",jp_name:"",jp_total:"",jp_zong:"",total:"",bargain:"",h5_content:"",code:"",myappid:"",firstFlag:!0,head:!0,can_pay:!0,oldheight:"",buy_again:"",shop_status:"",shop_address_id:"",shop_list:[],payTitle:"",tt_alipay_app:!1,tmplIds:["2KrrJchj92YRKhZZ0SSHz76dmrT0cLBJ2Wfe0","ncs3u3Bmmi0jW7EXAik4KQvxF3JxbaulWNwbLXDto","CZAPo_TqOOeC5K7XYvBeB_LXmyXKIhXkZROArNZDwQ8"]}},beforeDestroy:function(){var t=this;if(this.$store.state.order_id="",!this.bargain&&"jp"!=this.pay_name){var a={module:"app",app:"leave_Settlement",action:"order",access_id:t.access_id,order_list:t.order_list,price:t.value};if(this.$req.post({data:a}),this.buy_again){var i={module:"app",app:"del_cart",action:"order",access_id:t.access_id,cart_id:t.cart_id};this.$req.post({data:i})}e.removeStorageSync("goodsInfo"),t.$store.state.cart_id=""}},onLoad:function(t){this.afhalen_translateX=e.upx2px(2);var a=this;a.$store.state.address_id=a.$store.state.address_id_def,a.cpId=t.product,a.returnR=t.returnR,1!=t.buy_again&&"true"!=t.buy_again||(a.buy_again=!0),e.onWindowResize((function(e){""==a.oldheight?(a.oldheight=e.size.windowHeight,a._hide()):Number(a.oldheight)<Number(e.size.windowHeight)?(a.oldheight=e.size.windowHeight,a._show()):Number(a.oldheight)==Number(e.size.windowHeight)?a._show():a._hide()})),a.cpId&&e.setStorageSync("goodsInfo",a.cpId),t.canshu&&e.setStorageSync("canshu",t.canshu),1==t.isDistribution&&"false"!=t.isDistribution&&(a.isDistribution=!0),a.bargain=t.bargain,a.bargain_id=t.bargain_id,a.order_no=t.order_no,a.orde_id=a.$store.state.order_id,a.cart_id=a.$store.state.cart_id,t.cart_id&&(a.cart_id=t.cart_id,a.$store.state.cart_id=a.cart_id),a.pay_name=a.$store.state.pay_lx,a.bind_id=a.$store.state.bindding_num,a.access_id=e.getStorageSync("access_id")?e.getStorageSync("access_id"):this.$store.state.access_id,e.getProvider({service:"payment",success:function(e){a.providerList=e.provider.map((function(e){switch(e){case"alipay":return{name:"支付宝",id:e,loading:!1};case"wxpay":return{name:"微信",id:e,loading:!1}}}))},fail:function(e){console.log("获取支付通道失败：",e)}}),a.$nextTick((function(){a.$refs.lktAuthorizeComp.handleAfterAuth(a,"../login/login?landing_code=1",(function(){a._axios()}))})),a.$nextTick((function(){a.$refs.lktAuthorizeComp.handleAfterAuth(a,"../login/login?landing_code=1",(function(){a.orde_id=a.$store.state.order_id,a.cart_id=a.$store.state.cart_id,a.address_id=a.$store.state.address_id,a.$store.state.address_id=a.$store.state.address_id_def,a.shop_address_id=e.getStorageSync("shop_address_id"),console.log(a.shop_address_id),a.pay_name=a.$store.state.pay_lx,a.bind_id=a.$store.state.bindding_num,a.firstFlag=!0,a.access_id=e.getStorageSync("access_id")?e.getStorageSync("access_id"):a.$store.state.access_id;var t=e.getStorageSync("lkt_address_id_def");t?a.adds_f=!0:""==a.$store.state.address_id_def||void 0==a.$store.state.address_id_def?a.adds_f=!1:a.adds_f=!0,a._axios()}))}))},onUnload:function(){},onShow:function(){var t=this;t.hc_address_id!=t.$store.state.address_id&&(t.hc_address_id=t.address_id=t.$store.state.address_id),e.getStorageSync("store_choose")&&(this.afhalen_shop=e.getStorageSync("store_choose").name,e.removeStorageSync("store_choose")),t.shop_address_id=e.getStorageSync("shop_address_id"),t._axios("onshow"),t.LaiKeTuiCommon.getWXTmplIds(t),console.log(t.open_wxpay+"======open_alipay========"+t.open_alipay)},methods:r({isshow:function(){var e=this;console.log("me.payment================="+e.payment.mini_wechat),1==e.payment.mini_wechat&&(e.open_wxpay=!0),1==e.payment.wallet_pay&&(this.chooseWay("balance"),e.open_wallet=!0,e.useWallte=!0)},sChange:function(){this.afhalen_translateX>5?(this.afhalen_translateX=e.upx2px(2),this._axios("onshow")):(this.freight=this.freightt=0,this.afhalen_translateX=e.upx2px(70)),console.log(this.afhalen_translateX)},changeLoginStatus:function(){var t=this;t.access_id=e.getStorageSync("access_id"),t._axios("==")},_hide:function(){this.ishide=1},_show:function(){this.ishide=0,0==this.value.length&&(this.value=0)},_back:function(){switch(console.log("_back"),this.returnR){case"1":e.switchTab({url:"../tabBar/shoppingCart"});break;case"2":e.navigateBack({delta:1});break;default:e.switchTab({url:"../tabBar/home"})}},toUrl:function(){this.laikepay.toUrl(this)},replaceInput:function(e){this.value=Math.abs(e.detail.value),this._usyue()},_usyue:function(){(0,s.laikeUseyue)(this)},payThree:function(){(0,s.laikePayThree)(this)},_showPayWay:function(){var e=this;this.showPayWay1=!0,setTimeout((function(){e.showPayWay=!1,e.showPayWay1=!1}),500)},forgetPW:function(){e.navigateTo({url:"../../pagesB/setUp/paymentPassword"})},chooseWay:function(e){(0,s.laikeChooseWay)(this,e)},switchChange:function(e){(0,s.laikeSwitchChange)(e,this)},_uni_navigateTo:function(t){e.navigateTo({url:t})},getOrderIn:function(e){return this.laikepay.getOrderInfo(this,e)},weixinPay:function(){this.laikepay.weixin_minipay(this)},pay_wx:function(e){this.laikepay.laikePayMain(this,e)},_coupon:function(){(0,s.laikeShowCoupon)(this)},_closeCoupon:function(){(0,s.laikeCloseCoupon)(this)},in_array:function(e,t){for(var a=0;a<t.length;a++){var i=t[a].toString();if(i==e)return!0}return!1},_coupon_use:function(e,t,a){(0,s.laikeChooseCoupon)(this,e,t,a)},focust:function(){this.focus=!0}},(0,o.mapMutations)({order_id:"SET_ORDER_ID",status:"SET_STATUS",h_content:"SET_H_CONTENT"}),{_gotPayType:function(){(0,s.laikeGetPayType)(this)},_pay_style:function(){var t=this;e.showLoading({title:"请稍等.."}),wx.requestSubscribeMessage({tmplIds:t.tmplIds,success:function(a){e.hideLoading(),console.log("微信小程序订阅消息授权成功"),(0,s.laikePayAtOnce)(t)},fail:function(a){e.hideLoading(),(0,s.laikePayAtOnce)(t),console.log(a),console.log("微信小程序订阅消息授权失败")}})},_confirm:function(e){this.msg=e,this.laikepay.laike_walletpay_ok(this)},_cancel:function(){this.laikepay.laike_walletpay_cancel(this)},_payAxios:function(e){this.laikepay.laike_walletpay(this,e)},_password_status:function(){e.navigateTo({url:"../../pagesB/setUp/payment"}),this.password_display=!1},_mask_value:function(e){this.mask_value=e,"确认"==e&&3==this.pay_style&&this._deduction()},_axios:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=this,i=e.getStorageSync("goodsInfo");if("jp"==a.pay_name){console.log("_axios_jp________");var o={module:"app",action:"order",auction_id:a.bind_id,product_type:"JP",access_id:this.access_id,app:"Settlement"};this.cpId&&(o.product=i,o.cart_id="")}else if(a.bargain){console.log("_axios_bargain________");o={module:"app",action:"order",product_type:"KJ",access_id:this.access_id,app:"Settlement",bargain_id:this.bargain_id,address_id:this.address_id};this.cpId&&(o.product=i,o.cart_id="")}else{console.log("_axios_else________");o={module:"app",action:"order",app:"Settlement",cart_id:this.cart_id,access_id:this.access_id,address_id:this.address_id,canshu:e.getStorageSync("canshu")};i&&(o.product=i,o.cart_id="")}a.afhalen_translateX>5&&(o.shop_address_id=a.shop_address_id),e.request({data:o,url:e.getStorageSync("url"),header:{"content-type":"application/x-www-form-urlencoded"},method:"POST",success:function(i){if(0===i.data.status)return console.log("JSON.stringify(data)"),console.log(JSON.stringify(o)),console.log(JSON.stringify(i)),void(a.load=!1);var s=i.data,n=(s.addemt,s.address),r=s.coupon_id,d=s.payment,c=s.freight,_=s.name,u=s.password_status,l=s.products,p=s.products_total,h=s.total,g=s.user_money,f=s.enterless,m=s.is_distribution,y=s.discount,b=s.grade_rate,S=i.data.coupon_money||0,T=i.data.reduce_money||0;a.address=n,a.price=h,a.total=h,a.payment=d,l&&l.length>0&&(a.pro=l,a.payTitle=l[0].list[0].product_title,console.log("me.payTitle"),console.log(a.payTitle)),a.user_money=g,n&&(a.addre_id=n.id,a.$store.state.address_id_def||(a.$store.state.address_id_def=n.id)),a.password_status=u,"onshow"!=t?(a.coupon_name=S,a.coupon_id=r,a.coupon_name1=i.data.coupon_name,a.isshow()):e.getStorageSync("chooseAddress")&&(a.address=e.getStorageSync("chooseAddress"),a.addre_id=e.getStorageSync("chooseAddress").id),a.coupon_status=i.data.coupon_status,a.name=_,a.enterless=f,a.is_distribution=m,a.discount=y||1,a.grade_rate=b||1,a.reduce_money=T,a.reduce_name=i.data.reduce_name,a.is_subtraction=i.data.is_subtraction,a.products_total=p,a.user_money>a.total?(a.pay_index=0,a.pay_style=1):(a.pay_index=1,a.pay_style=2),a.address&&(0!=a.address.length?a.adds_f=!0:a.adds_f=!1),i.data.shop_status&&i.data.shop_list&&(a.shop_status=i.data.shop_status,a.shop_list=i.data.shop_list,0==i.data.shop_list.length?(a.shop_address_id="",e.setStorageSync("shop_address_id","")):(a.shop_address_id=i.data.shop_list.id,e.setStorageSync("shop_address_id",i.data.shop_list.id))),a.freightt=parseFloat(c).toFixed(2),a.freight=c,a.load=!1},error:function(e){console.log(e)}})},changeValue:function(e,t){var a=this;(0,s.laikeChangeValue)(a,e,t)},_yueInput:function(e){var t=this;6==e.detail.value.length&&setTimeout((function(){t.laikepay.laike_walletpay_ok(t)}),100)}})},d(i,"onUnload",(function(){e.getStorageSync("chooseAddress")&&e.removeStorageSync("chooseAddress")})),d(i,"components",{heads:c,Maskm:_,wxParse:u,paymodel:l}),d(i,"watch",{pay_display:function(e){console.log("我被动了？",e)},address_id:function(e,t){t&&this._axios("address")},msg:function(e){this.msgLength=e.length},page:{handler:function(e,t){0==t&&1==e&&(this.timer=setTimeout((function(){}),500))},deep:!0},freight:function(){console.log("freight:function");var t=this;console.log("___________________"),console.log(t.freight),t.price1=(t.products_total-t.coupon_name-t.reduce_money)*t.discount*t.grade_rate+t.freight,t.price2=t.price1.toFixed(2),t.useWallte&&(Number(t.user_money)>Number(t.price2)?(console.log("me.value11111111111111111"),console.log(t.value),t.value=t.price2,console.log(t.value)):(t.needpay=t.price2-t.value,console.log("me.needpay1"),console.log(t.needpay))),t.price2<0&&(t.price2=.01,e.showToast({title:"价格小于0——3",icon:"none",duration:1500}));var a=(this.products_total-this.coupon_name-this.reduce_money)*this.grade_rate+this.freight;a<0&&(a=.01,e.showToast({title:"价格小于0——2",icon:"none",duration:1500})),t.needpay=t.price2-t.value,console.log("me.needpay2"),console.log(t.needpay)},coupon_name:function(e,t){this.changeValue(e,t)},value:function(e,t){this.changeValue(e,t)},price1:function(t,a){var i=this;this.$nextTick((function(){i.useWallte?(console.log("me.useWallte1"),i.price1=(i.products_total-i.coupon_name-i.reduce_money)*i.discount*i.grade_rate+i.freight-i.value):(console.log("me.useWallte2"),(i.products_total-i.coupon_name)*i.discount*i.grade_rate-i.reduce_money<=0?(e.showToast({title:"价格小于0——1",icon:"none",duration:1500}),i.price1=(i.products_total-i.coupon_name-i.reduce_money)*i.discount*i.grade_rate+i.freight+.01):i.price1=(i.products_total-i.coupon_name-i.reduce_money)*i.discount*i.grade_rate+i.freight),i.price1=Number(i.price1).toFixed(2),i.needpay=i.price1,console.log("me.needpay3"),console.log(i.needpay)}))}}),i);t.default=p}).call(this,a("543d")["default"])},f0b3:function(e,t,a){"use strict";(function(e){a("a1f9");i(a("66fd"));var t=i(a("2bc5"));function i(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,a("543d")["createPage"])}},[["f0b3","common/runtime","common/vendor"]]]);