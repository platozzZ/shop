(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/order/myOrder"],{"2b09":function(e,t,o){"use strict";o.r(t);var a=o("3a3c"),i=o("a7ee");for(var n in i)"default"!==n&&function(e){o.d(t,e,(function(){return i[e]}))}(n);o("e7b5");var r,s=o("f0c5"),c=Object(s["a"])(i["default"],a["b"],a["c"],!1,null,"c63079f8",null,!1,a["a"],r);t["default"]=c.exports},"3a3c":function(e,t,o){"use strict";var a,i=function(){var e=this,t=e.$createElement;e._self._c},n=[];o.d(t,"b",(function(){return i})),o.d(t,"c",(function(){return n})),o.d(t,"a",(function(){return a}))},"988a":function(e,t,o){},a245:function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o("2f62"),i=(o("b206"),n(o("4c2d")));function n(e){return e&&e.__esModule?e:{default:e}}function r(e){return u(e)||d(e)||c(e)||s()}function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,t){if(e){if("string"===typeof e)return l(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(o):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?l(e,t):void 0}}function d(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function u(e){if(Array.isArray(e))return l(e)}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,a=new Array(t);o<t;o++)a[o]=e[o];return a}function h(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,a)}return o}function _(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?h(Object(o),!0).forEach((function(t){p(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):h(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function p(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var f=function(){o.e("components/uni-load-more").then(function(){return resolve(o("ef75"))}.bind(null,o)).catch(o.oe)},g=function(){Promise.all([o.e("common/vendor"),o.e("components/header-h5")]).then(function(){return resolve(o("b133"))}.bind(null,o)).catch(o.oe)},m=function(){Promise.all([o.e("common/vendor"),o.e("components/header")]).then(function(){return resolve(o("6c1c"))}.bind(null,o)).catch(o.oe)},T=function(){o.e("components/delModel").then(function(){return resolve(o("d11a"))}.bind(null,o)).catch(o.oe)},v={data:function(){return{receiving_check:{por_list:[]},receiving_shop:{flag:!1,bottom:""},can_del:!0,fastTap:!0,title:"我的订单",jiantou:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon/jiantou2x.png",storeImg:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon/store.png",serchimg:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon/searchh.png",noOrder:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon/noOrder.png",loadImg:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon/loading.gif",bback:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon/bback.png",search2x:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon/search2x.png",integral_hong:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon/integral.png",integral_hei:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon/integral_hei.png",finish2x:this.LaiKeTuiCommon.LKT_ROOT_VERSION_URL+"images/icon/finish2x.png",head:!0,header:["全部","待付款","待发货","待收货","待评价"],rightText:["立即付款","提醒发货","确认收货","待评价","退货","追加评价","再次购买","拼团详情","邀请好友"],leftText:["取消订单","查看物流","删除订单","查看详情","拼团详情"],access_id:"",order:[],status_id:"",sreach_value:"",page:1,allLoaded:!1,loading:!1,del_num:0,load:!0,timer:null,count:"",flag:!0,loadingType:0,value:"",alertTips:!1,pay_name:"MYORDER",shouhuoData:[],isDelModel:!1}},onReachBottom:function(){this._rollBottom()},onLoad:function(t){this.receiving_shop.bottom=e.upx2px(160);var o=this;wx.getSystemInfo({success:function(e){o.receiving_shop.bottom-=e.statusBarHeight}})},computed:{imgWidth:function(){if(this.receiving_check.por_list&&this.receiving_check.por_list.length>1){var t=150*this.receiving_check.por_list.length;return e.upx2px(t)+"px"}}},watch:{value:function(e,t){this.changeValue()}},beforeDestroy:function(){clearInterval(this.timer),this.order=[]},onShow:function(){this.load=!0,this.status_id=this.$store.state.status,this.access_id=e.getStorageSync("access_id")?e.getStorageSync("access_id"):this.$store.state.access_id,this.access_id?(this._axios(),this.page=1,this.loadingType=0):this.load=!1,this.flag=!0},components:{uniLoadMore:f,heads:g,headapp:m,delModel:T},methods:_({},(0,a.mapMutations)({cart_id:"SET_CART_ID",order_id:"SET_ORDER_ID",address_id:"SET_ADDRESS_ID",status:"SET_STATUS"}),{onModeOk:function(){this.isDelModel=!this.isDelModel},getOrderType:function(e){0==this.status_id?e.order_type="":1==this.status_id?e.order_type="payment":2==this.status_id?e.order_type="send":3==this.status_id?e.order_type="receipt":4==this.status_id&&(e.order_type="evaluete")},changeLoginStatus:function(){this.access_id=e.getStorageSync("access_id"),this._axios()},_rollBottom:function(){var e=this;if(0==this.loadingType){console.log(this.loadingType,"结束"),this.loadingType=1;var t={module:"app",action:"order",app:"load_more",access_id:this.access_id,page:this.page};this.getOrderType(t),this.$req.post({data:t}).then((function(t){var o,a=t.order;(e.page++,a.length>0)?((0,i.default)(a),(o=e.order).push.apply(o,r(a)),e.del_num=0,e.loadingType=0):e.loadingType=2}))}else console.log(this.loadingType,"开始")},_selTips:function(t){var o=this,a=this;if(t){var i=a.shouhuoData["orde_id"],n={module:"app",action:"order",app:"ok_Order",order_id:i,access_id:this.access_id};this.$req.post({data:n}).then((function(t){var a=t.code;t.message;200===a?(e.showToast({title:"收货成功！",duration:1e3,icon:"none"}),o.alertTips=!1,setTimeout((function(){o._axios()}),1e3)):e.showToast({title:t.message,duration:1500,icon:"none"})}))}else this.alertTips=!1},_goStore:function(t){e.navigateTo({url:"../../pagesA/store/store?shop_id="+t})},_toHome:function(){e.switchTab({url:"../tabBar/home"})},_navigateTo:function(t,o,a){var i="";0==t?(i="../order/order?order_id="+o+"&showPay=true",e.navigateTo({url:i})):(i="../order/order?order_id="+o,e.navigateTo({url:i})),this.flag=!1},_header_index:function(e){var t=this;t.$refs.lktAuthorizeComp.handleAfterAuth(t,"../login/login?landing_code=1",(function(){t.page=1,"待付款"==t.header[e]?(t.status(1),t.status_id=t.$store.state.status):"待发货"==t.header[e]?(t.status(2),t.status_id=t.$store.state.status):"待收货"==t.header[e]?(t.status(3),t.status_id=t.$store.state.status):"待评价"==t.header[e]?(t.status(4),t.status_id=t.$store.state.status):"全部"==t.header[e]&&(t.status(0),t.status_id=t.$store.state.status),t._axios()}))},_axios:function(){var t=this,o={access_id:this.access_id,module:"app",action:"order",app:"index"};this.getOrderType(o),this.access_id&&this.$req.post({data:o}).then((function(e){var o,a=e.order;t.order=[],setTimeout((function(){t.load=!1}),300),(0,i.default)(a),(o=t.order).push.apply(o,r(a)),a.length<10?t.allLoaded=!0:t.allLoaded=!1})).catch((function(t){e.showToast({title:t.message,duration:1500,icon:"none"})}))},comment:function(t){var o=t.id,a=t.r_status;3==a?e.navigateTo({url:"../evaluate/evaluating?order_details_id="+o+"&num=all"}):e.navigateTo({url:"../evaluate/evaluating?order_details_id="+o+"&add=true&num=all"})},_buttonLeft:function(t,o,a,i){var n=this,r=this,s=o.id,c=o.sNo,d=o.status;o.delivery_status,a.attribute_id,a.p_id;if(!this.can_del)return!1;this.can_del=!1,setTimeout((function(){n.can_del=!0}),1500),this.fastTap=!1;var u=c.substr(0,2),l={module:"app",action:"order",order_id:s,access_id:this.access_id};if(0==d)l.app="removeOrder",this.$req.post({data:l}).then((function(t){var o=t.code;t.message;200===o&&e.showToast({title:"取消成功！",duration:1e3,icon:"none"}),r._axios()}));else if(2==d||3==d||5==d){r.fastTap=!0;var h={module:"app",action:"order",app:"logistics",id:c,access_id:this.access_id,type:""};1==this.source&&(h.type="pond"),e.request({url:e.getStorageSync("url"),header:{"content-type":"application/x-www-form-urlencoded"},data:h,method:"POST",success:function(t){if(e.hideLoading(),200==t.data.code){var o=t.data.res;o.length>1?e.navigateTo({url:"../../pagesB/expressage/expressage?sNo="+c}):e.navigateTo({url:"../../pages/expressage/expressage?list="+JSON.stringify(o[0])+"&sNo="+c})}else e.showToast({title:t.data.message,duration:1500,icon:"none"})},fail:function(t){e.showToast({title:"数据加载失败！",duration:2e3,icon:"none"})}})}else if(12==d||4==d||1==d&&"PT"!=u)r.fastTap=!0,e.navigateTo({url:"../order/order?order_id="+s}),console.log(456);else if(9==d||10==d||1==d&&"PT"==u){r.fastTap=!0;var _="../../pagesA/group/group_end?sNo="+c+"&returnR=1";e.navigateTo({url:_})}else 7!=d&&6!=d&&11!=d&&12!=d||(l.app="del_order",e.request({data:l,url:e.getStorageSync("url"),header:{"content-type":"application/x-www-form-urlencoded"},method:"POST",success:function(t){console.log(t);var o=t.data,a=o.code,n=o.message;200==a?(e.showToast({title:"删除成功！",duration:1e3,icon:"none"}),r.order.splice(i,1),r.del_num++,r.del_num>=5&&r._rollBottom()):e.showToast({title:n,duration:1e3,icon:"none"}),r.fastTap=!0}}))},_buttonRight:function(t,o,a,i){console.log("==================>"),console.log(o),console.log();var n=o.id,r=o.sNo,s=o.status,c=o.delivery_status,d=(o.list,a.attribute_id,a.p_id,this);r.substr(0,2);if(7==s||6==s||12==s){var u={module:"app",action:"order ",app:"buy_again",id:n,access_id:this.access_id};console.log(u),e.request({data:u,url:e.getStorageSync("url"),header:{"content-type":"application/x-www-form-urlencoded"},method:"POST",success:function(t){console.log(t);var o=t.data,a=o.cart_id,i=o.code;o.message;200==i?(d.cart_id(a),d.order_id(""),d.address_id(""),d.$store.state.cart_id=t.data.cart_id,e.navigateTo({url:"../pay/orderDetailsr?returnR=2&buy_again=true"})):e.showToast({title:t.data.message,duration:1500,icon:"none"})}})}else if(0==s){d.order_id(n),d.address_id("");var l="../order/order_payment?order_id="+n+"&showPay=true";e.navigateTo({url:l})}else if(1==s){if(console.log(this.fastTap),!this.fastTap)return;if(this.fastTap=!1,0==c){u={module:"app",order_id:n,access_id:this.access_id,app:"delivery_delivery",action:"order"};console.log(u),e.request({data:u,url:e.getStorageSync("url"),header:{"content-type":"application/x-www-form-urlencoded"},method:"POST",success:function(t){d.fastTap=!0,console.log(t),200==t.data.code?(e.showToast({title:"已提醒卖家发货！",duration:1e3,icon:"none"}),d._axios()):e.showToast({title:t.data.message,duration:1500,icon:"none"})}})}else d.fastTap=!0}else if(4==s)e.navigateTo({url:"../order/order?order_id="+n});else if(3==s)e.navigateTo({url:"../evaluate/evaluating?order_details_id="+n+"&num=all"});else if(5==s)e.navigateTo({url:"../evaluate/evaluating?order_details_id="+n+"&add=true&num=all"});else if(9==s||10==s||11==s){l="../../pagesA/group/group_end?sNo="+r;e.navigateTo({url:l})}else if(2==s)return d.shouhuoData["orde_id"]=n,d.alertTips=!0,!1},back_click:function(){e.showToast({title:"请不要频繁点击提醒！",duration:1e3,icon:"none"})},_seart:function(){""===this.sreach_value?e.showToast({title:"请输入搜索关键词",duration:1e3,icon:"none"}):e.navigateTo({url:"../order/orderSearch?sreach_value="+this.sreach_value})},receiving_stop:function(){this.receiving_shop.flag=!1},_receiving:function(t){var o=this,a={module:"app",app:"see_extraction_code",action:"order",order_id:t.id,access_id:this.access_id};this.$req.post({data:a}).then((function(t){o.receiving_shop.flag=!0,o.fastTap=!0;var a=t.code,i=t.list,n=t.message;200===a?o.receiving_check=i:e.showToast({title:n,duration:1500,icon:"none"})}))},returnGoods:function(e){var t="";return t=1==e.re_type||2==e.re_type?"退款":"退换",4==e.r_status?t+="中":t+="成功",t},shuchu:function(e){console.log(e)}})};t.default=v}).call(this,o("543d")["default"])},a7ee:function(e,t,o){"use strict";o.r(t);var a=o("a245"),i=o.n(a);for(var n in a)"default"!==n&&function(e){o.d(t,e,(function(){return a[e]}))}(n);t["default"]=i.a},e7b5:function(e,t,o){"use strict";var a=o("988a"),i=o.n(a);i.a},ee57:function(e,t,o){"use strict";(function(e){o("a1f9");a(o("66fd"));var t=a(o("2b09"));function a(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,o("543d")["createPage"])}},[["ee57","common/runtime","common/vendor"]]]);